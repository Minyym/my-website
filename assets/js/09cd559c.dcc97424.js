"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[521],{5680:(e,n,a)=>{a.d(n,{xA:()=>s,yg:()=>m});var l=a(6540);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function o(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);n&&(l=l.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,l)}return a}function t(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?o(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function i(e,n){if(null==e)return{};var a,l,r=function(e,n){if(null==e)return{};var a,l,r={},o=Object.keys(e);for(l=0;l<o.length;l++)a=o[l],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(l=0;l<o.length;l++)a=o[l],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=l.createContext({}),g=function(e){var n=l.useContext(p),a=n;return e&&(a="function"==typeof e?e(n):t(t({},n),e)),a},s=function(e){var n=g(e.components);return l.createElement(p.Provider,{value:n},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return l.createElement(l.Fragment,{},n)}},y=l.forwardRef((function(e,n){var a=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),d=g(a),y=r,m=d["".concat(p,".").concat(y)]||d[y]||c[y]||o;return a?l.createElement(m,t(t({ref:n},s),{},{components:a})):l.createElement(m,t({ref:n},s))}));function m(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=a.length,t=new Array(o);t[0]=y;var i={};for(var p in n)hasOwnProperty.call(n,p)&&(i[p]=n[p]);i.originalType=e,i[d]="string"==typeof e?e:r,t[1]=i;for(var g=2;g<o;g++)t[g]=a[g];return l.createElement.apply(null,t)}return l.createElement.apply(null,a)}y.displayName="MDXCreateElement"},9405:(e,n,a)=>{a.r(n),a.d(n,{contentTitle:()=>t,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var l=a(8168),r=(a(6540),a(5680));const o={},t=void 0,i={unversionedId:"webpack/\u6a21\u5757\u5316",id:"webpack/\u6a21\u5757\u5316",isDocsHomePage:!1,title:"\u6a21\u5757\u5316",description:"webpack\u4e2d\u7684plugin\u548cloader\u7684\u533a\u522b",source:"@site/docs/webpack/1.\u6a21\u5757\u5316.md",sourceDirName:"webpack",slug:"/webpack/\u6a21\u5757\u5316",permalink:"/my-website/docs/webpack/\u6a21\u5757\u5316",editUrl:"https://github.com/Minyym/my-website/edit/master/docs/webpack/1.\u6a21\u5757\u5316.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u9762\u8bd5\u9898",permalink:"/my-website/docs/react/\u9762\u8bd5\u9898"},next:{title:"electron",permalink:"/my-website/docs/\u672a\u5206\u7c7b/electron"}},p=[{value:"webpack\u4e2d\u7684plugin\u548cloader\u7684\u533a\u522b",id:"webpack\u4e2d\u7684plugin\u548cloader\u7684\u533a\u522b",children:[]},{value:"webpack",id:"webpack",children:[{value:"\u6838\u5fc3\u6253\u5305\u539f\u7406\u5168\u6d41\u7a0b",id:"\u6838\u5fc3\u6253\u5305\u539f\u7406\u5168\u6d41\u7a0b",children:[]},{value:"compiler \u548c compilation",id:"compiler-\u548c-compilation",children:[]},{value:"compiler.hooks",id:"compilerhooks",children:[]},{value:"loader",id:"loader",children:[]},{value:"plugin",id:"plugin",children:[]},{value:"<code>webpack</code>\u914d\u7f6e\u9759\u6001\u8d44\u6e90\u652f\u6301",id:"webpack\u914d\u7f6e\u9759\u6001\u8d44\u6e90\u652f\u6301",children:[]},{value:"\u522b\u540d\u7edf\u4e00\u3001\u6269\u5c55\u540d",id:"\u522b\u540d\u7edf\u4e00\u6269\u5c55\u540d",children:[]},{value:"\u5e38\u89c1loader",id:"\u5e38\u89c1loader",children:[]},{value:"webpack\u4f18\u5316\u505a\u8fc7\u4ec0\u4e48",id:"webpack\u4f18\u5316\u505a\u8fc7\u4ec0\u4e48",children:[]},{value:"tapable",id:"tapable",children:[]},{value:"source-map",id:"source-map",children:[]},{value:"Hash\u3001chunkHash\u3001contentHash",id:"hashchunkhashcontenthash",children:[]}]}],g={toc:p},s="wrapper";function d(e){let{components:n,...a}=e;return(0,r.yg)(s,(0,l.A)({},g,a,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("h2",{id:"webpack\u4e2d\u7684plugin\u548cloader\u7684\u533a\u522b"},"webpack\u4e2d\u7684plugin\u548cloader\u7684\u533a\u522b"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"\u4ece\u8fd0\u884c\u65f6\u673a\u7684\u89d2\u5ea6\u533a\u5206"),(0,r.yg)("ol",{parentName:"li"},(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"loader\u8fd0\u884c\u5728\u6253\u5305\u6587\u4ef6\u4e4b\u524d\uff08loader\u4e3a\u5728\u6a21\u5757\u52a0\u8f7d\u65f6\u7684\u9884\u5904\u7406\u6587\u4ef6\uff09")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"plugins\u5728\u6574\u4e2a\u7f16\u8bd1\u5468\u671f\u90fd\u8d77\u4f5c\u7528")))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Webpack \u662f\u4e00\u4e2a\u6a21\u5757\u6253\u5305\u5668\uff0c\u5b83\u7684\u4e3b\u8981\u76ee\u7684\u662f\u5c06\u591a\u4e2a\u6a21\u5757\u6253\u5305\u6210\u4e00\u4e2a\u6587\u4ef6\uff08\u6216\u591a\u4e2a\u6587\u4ef6\uff09\u3002Webpack \u53ef\u4ee5\u901a\u8fc7 loader \u548c plugin \u8fdb\u884c\u6269\u5c55\u548c\u5b9a\u5236\u3002"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Loader\uff1a\u5c06\u5404\u79cd\u7c7b\u578b\u7684\u6587\u4ef6\u8f6c\u6362\u4e3a webpack \u53ef\u4ee5\u5904\u7406\u7684\u6a21\u5757\uff0c\u4f8b\u5982\u5c06 ES6 \u8f6c\u6362\u4e3a ES5\u3001\u5c06 Sass \u8f6c\u6362\u4e3a CSS\u3001\u5c06\u56fe\u7247\u8f6c\u6362\u4e3a data URL \u7b49\u3002Loader \u5728 module.rules \u4e2d\u8fdb\u884c\u914d\u7f6e\uff0c\u53ef\u4ee5\u5728\u5f15\u5165\u6a21\u5757\u65f6\u901a\u8fc7 require \u6216 import \u8bed\u53e5\u4f7f\u7528\u3002\u6bcf\u4e2a loader \u53ea\u80fd\u5904\u7406\u4e00\u79cd\u7c7b\u578b\u7684\u6587\u4ef6\u3002"),(0,r.yg)("li",{parentName:"ul"},"Plugin\uff1a\u7528\u4e8e\u6267\u884c\u8303\u56f4\u66f4\u5e7f\u7684\u4efb\u52a1\uff0c\u4f8b\u5982\u6253\u5305\u4f18\u5316\u3001\u8d44\u6e90\u7ba1\u7406\u3001\u6ce8\u5165\u73af\u5883\u53d8\u91cf\u7b49\u3002Plugin \u53ef\u4ee5\u5728\u6574\u4e2a\u6253\u5305\u8fc7\u7a0b\u4e2d\u7684\u4e0d\u540c\u9636\u6bb5\u6267\u884c\u81ea\u5b9a\u4e49\u7684\u4efb\u52a1\u3002\u6bcf\u4e2a Plugin \u53ef\u4ee5\u5b9e\u73b0\u591a\u4e2a\u4efb\u52a1\u3002")),(0,r.yg)("p",{parentName:"li"},"\u603b\u7684\u6765\u8bf4\uff0cLoader \u662f\u7528\u4e8e\u8f6c\u6362\u6a21\u5757\u5185\u5bb9\u7684\u5de5\u5177\uff0cPlugin \u662f\u7528\u4e8e\u6267\u884c\u66f4\u590d\u6742\u4efb\u52a1\u7684\u5de5\u5177\u3002Loader \u548c Plugin \u90fd\u662f\u53ef\u63d2\u62d4\u7684\uff0c\u53ef\u4ee5\u6839\u636e\u9700\u8981\u9009\u62e9\u548c\u914d\u7f6e\u3002\u5728 Webpack \u914d\u7f6e\u4e2d\uff0cLoader \u7684\u4f5c\u7528\u8303\u56f4\u662f\u6a21\u5757\u7ea7\u522b\uff0cPlugin \u7684\u4f5c\u7528\u8303\u56f4\u662f\u6253\u5305\u7ea7\u522b\u3002"))),(0,r.yg)("h1",{id:"\u5de5\u7a0b\u5316"},"\u5de5\u7a0b\u5316"),(0,r.yg)("h2",{id:"webpack"},"webpack"),(0,r.yg)("h3",{id:"\u6838\u5fc3\u6253\u5305\u539f\u7406\u5168\u6d41\u7a0b"},"\u6838\u5fc3\u6253\u5305\u539f\u7406\u5168\u6d41\u7a0b"),(0,r.yg)("p",null,(0,r.yg)("img",{parentName:"p",src:"https://raw.githubusercontent.com/Minyym/figure-bed/master/img/202305101700577.png",alt:null})),(0,r.yg)("p",null,(0,r.yg)("img",{parentName:"p",src:"https://upload-images.jianshu.io/upload_images/16910815-35efd84cb5ec4057.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/551/format/webp",alt:null})),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"\u521d\u59cb\u5316\u53c2\u6570\u9636\u6bb5"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Cli\u547d\u4ee4\u884c\u4f20\u9012\u53c2\u6570")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"webpack.config.js\u4f20\u9012\u53c2\u6570")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"\u5b9e\u73b0\u5408\u5e76\u53c2\u6570\u9636\u6bb5")))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"\u7f16\u8bd1\u9636\u6bb5"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"\u521b\u5efacompiler\u5bf9\u8c61"),(0,r.yg)("li",{parentName:"ul"},"\u7f16\u5199Plugin"),(0,r.yg)("li",{parentName:"ul"},"\u5bfb\u627eentry\u5165\u53e3"),(0,r.yg)("li",{parentName:"ul"},"\u6839\u636e\u5165\u53e3\u6587\u4ef6\u8def\u5f84\u5206\u6790\u5165\u53e3\u6587\u4ef6\uff0c\u5bf9\u4e8e\u5165\u53e3\u6587\u4ef6\u8fdb\u884c\u5339\u914d\u5bf9\u5e94\u7684",(0,r.yg)("inlineCode",{parentName:"li"},"loader"),"\u8fdb\u884c\u5904\u7406\u5165\u53e3\u6587\u4ef6\u3002"),(0,r.yg)("li",{parentName:"ul"},"\u5c06",(0,r.yg)("inlineCode",{parentName:"li"},"loader"),"\u5904\u7406\u5b8c\u6210\u7684\u5165\u53e3\u6587\u4ef6\u4f7f\u7528",(0,r.yg)("inlineCode",{parentName:"li"},"webpack"),"\u8fdb\u884c\u7f16\u8bd1\u3002"),(0,r.yg)("li",{parentName:"ul"},"\u5206\u6790\u5165\u53e3\u6587\u4ef6\u4f9d\u8d56\uff0c\u91cd\u590d\u4e0a\u8fb9\u4e24\u4e2a\u6b65\u9aa4\u7f16\u8bd1\u5bf9\u5e94\u4f9d\u8d56\u3002"),(0,r.yg)("li",{parentName:"ul"},"\u5982\u679c\u5d4c\u5957\u6587\u4ef6\u5b58\u5728\u4f9d\u8d56\u6587\u4ef6\uff0c\u9012\u5f52\u8c03\u7528\u4f9d\u8d56\u6a21\u5757\u8fdb\u884c\u7f16\u8bd1\u3002"),(0,r.yg)("li",{parentName:"ul"},"\u9012\u5f52\u7f16\u8bd1\u5b8c\u6210\u540e\uff0c\u7ec4\u88c5\u4e00\u4e2a\u4e2a\u5305\u542b\u591a\u4e2a\u6a21\u5757\u7684",(0,r.yg)("inlineCode",{parentName:"li"},"chunk")))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"\u6a21\u5757\u7f16\u8bd1\u9636\u6bb5"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"\u6839\u636e\u5165\u53e3\u6587\u4ef6\u8def\u5f84\u5206\u6790\u5165\u53e3\u6587\u4ef6"),(0,r.yg)("li",{parentName:"ul"},"buildModule\u6a21\u5757\u7f16\u8bd1\u65b9\u6cd5",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"buildModule"),"\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\u8fdb\u884c\u6a21\u5757\u7f16\u8bd1\uff0c",(0,r.yg)("strong",{parentName:"li"},"\u7b2c\u4e00\u4e2a\u4e3a\u6a21\u5757\u6240\u5c5e\u7684\u5165\u53e3\u6587\u4ef6\u540d\u79f0"),"\uff0c\u7b2c\u4e8c\u4e2a\u4e3a\u9700\u8981\u7f16\u8bd1\u7684\u6a21\u5757\u8def\u5f84\u3002"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"buildModule"),"\u65b9\u6cd5\u8981\u8fdb\u884c\u4ee3\u7801\u7f16\u8bd1\u7684\u524d\u63d0\u5c31\u662f\uff0c\u901a\u8fc7",(0,r.yg)("inlineCode",{parentName:"li"},"fs"),"\u6a21\u5757\u6839\u636e\u5165\u53e3\u6587\u4ef6\u8def\u5f84\u8bfb\u53d6\u6587\u4ef6\u6e90\u4ee3\u7801\u3002"),(0,r.yg)("li",{parentName:"ul"},"\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u4e4b\u540e\uff0c\u8c03\u7528\u6240\u6709\u5339\u914d\u7684loader\u5bf9\u6a21\u5757\u8fdb\u884c\u5904\u7406\u5f97\u5230\u8fd4\u56de\u540e\u7684\u7ed3\u679c\u3002\u5f97\u5230",(0,r.yg)("inlineCode",{parentName:"li"},"loader"),"\u5904\u7406\u540e\u7684\u7ed3\u679c\u540e\uff0c\u901a\u8fc7",(0,r.yg)("inlineCode",{parentName:"li"},"babel"),"\u5206\u6790",(0,r.yg)("inlineCode",{parentName:"li"},"loader"),"\u5904\u7406\u540e\u7684\u4ee3\u7801\uff0c\u8fdb\u884c\u4ee3\u7801\u7f16\u8bd1\u3002(\u8fd9\u4e00\u6b65\u7f16\u8bd1\u4e3b\u8981\u662f\u9488\u5bf9",(0,r.yg)("inlineCode",{parentName:"li"},"require"),"\u8bed\u53e5\uff0c\u4fee\u6539\u6e90\u4ee3\u7801\u4e2d",(0,r.yg)("inlineCode",{parentName:"li"},"require"),"\u8bed\u53e5\u7684\u8def\u5f84)\u3002"),(0,r.yg)("li",{parentName:"ul"},"\u5982\u679c\u8be5\u5165\u53e3\u6587\u4ef6\u6ca1\u6709\u4f9d\u8d56\u4e0e\u4efb\u4f55\u6a21\u5757(",(0,r.yg)("inlineCode",{parentName:"li"},"require"),"\u8bed\u53e5)\uff0c\u90a3\u4e48\u8fd4\u56de\u7f16\u8bd1\u540e\u7684\u6a21\u5757\u5bf9\u8c61\u3002"),(0,r.yg)("li",{parentName:"ul"},"\u5982\u679c\u8be5\u5165\u53e3\u6587\u4ef6\u5b58\u5728\u4f9d\u8d56\u7684\u6a21\u5757\uff0c\u9012\u5f52",(0,r.yg)("inlineCode",{parentName:"li"},"buildModule"),"\u65b9\u6cd5\u8fdb\u884c\u6a21\u5757\u7f16\u8bd1\u3002"))))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"\u7f16\u8bd1\u5b8c\u6210\u9636\u6bb5")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"\u8f93\u51fa\u6587\u4ef6\u9636\u6bb5"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"\u5206\u6790\u539f\u59cb\u6253\u5305\u8f93\u51fa\u7ed3\u679c"),(0,r.yg)("li",{parentName:"ul"},"\u8f93\u51fa\u6587\u4ef6\u9636\u6bb5")))),(0,r.yg)("h3",{id:"compiler-\u548c-compilation"},"compiler \u548c compilation"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Compiler\u7c7b"),"(./lib/Compiler.js)\uff1awebpack\u7684\u4e3b\u8981\u5f15\u64ce\uff0c\u6269\u5c55\u81eaTapable\uff0c\u5305\u542b\u4e86 Webpack \u73af\u5883\u6240\u6709\u7684\u7684\u914d\u7f6e\u4fe1\u606f\u3002webpack \u4ece\u6267\u884c\u5230\u7ed3\u675f\uff0cCompiler\u53ea\u4f1a\u5b9e\u4f8b\u5316\u4e00\u6b21\u3002\u751f\u6210\u7684 compiler \u5bf9\u8c61\u8bb0\u5f55\u4e86 webpack \u5f53\u524d\u8fd0\u884c\u73af\u5883\u7684\u5b8c\u6574\u7684\u4fe1\u606f\uff0c\u8be5\u5bf9\u8c61\u662f\u5168\u5c40\u552f\u4e00\u7684\uff0c\u63d2\u4ef6\u53ef\u4ee5\u901a\u8fc7\u5b83\u83b7\u53d6\u5230 webpack config \u4fe1\u606f\uff0c\u5982entry\u3001output\u3001loaders\u7b49\u914d\u7f6e\u3002"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Compilation\u7c7b"),"(./lib/Compilation.js)\uff1a\u6269\u5c55\u81eaTapable\uff0c\u4e5f\u63d0\u4f9b\u4e86\u5f88\u591a\u5173\u952e\u70b9\u56de\u8c03\u4f9b\u63d2\u4ef6\u505a\u81ea\u5b9a\u4e49\u5904\u7406\u65f6\u9009\u62e9\u4f7f\u7528\u62d3\u5c55\u3002\u4e00\u4e2a compilation \u5bf9\u8c61\u4ee3\u8868\u4e86\u4e00\u6b21\u5355\u4e00\u7684\u7248\u672c\u6784\u5efa\u548c\u751f\u6210\u8d44\u6e90\uff0c\u5b83\u50a8\u5b58\u4e86\u5f53\u524d\u7684\u6a21\u5757\u8d44\u6e90\u3001\u7f16\u8bd1\u751f\u6210\u7684\u8d44\u6e90\u3001\u53d8\u5316\u7684\u6587\u4ef6\u3001\u4ee5\u53ca\u88ab\u8ddf\u8e2a\u4f9d\u8d56\u7684\u72b6\u6001\u4fe1\u606f\u3002\u7b80\u5355\u6765\u8bf4\uff0cCompilation\u7684\u804c\u8d23\u5c31\u662f\u5bf9\u6240\u6709 require \u56fe(graph)\u4e2d\u5bf9\u8c61\u7684\u5b57\u9762\u4e0a\u7684\u7f16\u8bd1\uff0c\u6784\u5efa module \u548c chunk\uff0c\u5e76\u5229\u7528\u63d2\u4ef6\u4f18\u5316\u6784\u5efa\u8fc7\u7a0b\uff0c\u540c\u65f6\u628a\u672c\u6b21\u6253\u5305\u7f16\u8bd1\u7684\u5185\u5bb9\u5168\u5b58\u5230\u5185\u5b58\u91cc\u3002compilation \u7f16\u8bd1\u53ef\u4ee5\u591a\u6b21\u6267\u884c\uff0c\u5982\u5728watch\u6a21\u5f0f\u4e0b\u542f\u52a8 webpack\uff0c\u6bcf\u6b21\u76d1\u6d4b\u5230\u6e90\u6587\u4ef6\u53d1\u751f\u53d8\u5316\uff0c\u90fd\u4f1a\u91cd\u65b0\u5b9e\u4f8b\u5316\u4e00\u4e2acompilation\u5bf9\u8c61\uff0c\u4ece\u800c\u751f\u6210\u4e00\u7ec4\u65b0\u7684\u7f16\u8bd1\u8d44\u6e90\u3002\u8fd9\u4e2a\u5bf9\u8c61\u53ef\u4ee5\u8bbf\u95ee\u6240\u6709\u7684\u6a21\u5757\u548c\u5b83\u4eec\u7684\u4f9d\u8d56\uff08\u5927\u90e8\u5206\u662f\u5faa\u73af\u4f9d\u8d56\uff09,\u901a\u8fc7 Compilation \u4e5f\u80fd\u8bfb\u53d6\u5230 Compiler \u5bf9\u8c61"),(0,r.yg)("p",null,"Compiler \u548c Compilation \u7684\u533a\u522b\u5728\u4e8e\uff1aCompiler \u4ee3\u8868\u4e86\u6574\u4e2a Webpack \u4ece\u542f\u52a8\u5230\u5173\u95ed\u7684\u751f\u547d\u5468\u671f\uff0c\u800c Compilation \u53ea\u662f\u4ee3\u8868\u4e86\u4e00\u6b21\u65b0\u7684\u7f16\u8bd1"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"compiler")," \u5bf9\u8c61\u4ee3\u8868\u7684\u662f\u6784\u5efa\u8fc7\u7a0b\u4e2d\u4e0d\u53d8\u7684 webpack \u73af\u5883\uff0c\u6574\u4e2a webpack \u4ece\u542f\u52a8\u5230\u5173\u95ed\u7684\u751f\u547d\u5468\u671f\u3002\u9488\u5bf9\u7684\u662fwebpack\u3002"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"compilation")," \u5bf9\u8c61\u53ea\u4ee3\u8868\u4e00\u6b21\u65b0\u7684\u7f16\u8bd1\uff0c\u53ea\u8981\u9879\u76ee\u6587\u4ef6\u6709\u6539\u52a8\uff0ccompilation \u5c31\u4f1a\u88ab\u91cd\u65b0\u521b\u5efa\u3002\u9488\u5bf9\u7684\u662f\u968f\u65f6\u53ef\u53d8\u7684\u9879\u76ee\u6587\u4ef6\u3002")),(0,r.yg)("h3",{id:"compilerhooks"},"compiler.hooks"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"NormalModuleFactory Hook")),(0,r.yg)("p",null,"NormalModuleFactory \u7528\u4e8e\u751f\u6210\u6a21\u5757\uff0ccompiler \u5bf9\u8c61\u6b63\u662f\u901a\u8fc7\u8fd9\u4e2a\u6a21\u5757\u6765\u5904\u7406\u7f16\u8bd1\u6a21\u5757\u8bf7\u6c42\u3002"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"import vue from 'vue'")," \u5c5e\u4e8e\u6a21\u5757\u8bf7\u6c42\u3002"),(0,r.yg)("p",null,"\u901a\u8fc7 NormalModuleFactory Hook \u6ce8\u518c\u4e8b\u4ef6\u51fd\u6570\uff0c\u5f53 webpack \u5904\u7406",(0,r.yg)("strong",{parentName:"p"},"\u6a21\u5757\u5185\u90e8\u7684\u4f9d\u8d56\u6a21\u5757\u5f15\u5165\u65f6"),"\u4f1a\u89e6\u53d1\u5bf9\u5e94\u7684 hook \u4ece\u800c\u5224\u65ad\uff1a\u5982\u679c\u5373\u5c06\u5f15\u5165\u7684\u6a21\u5757\u5339\u914d\u63d2\u4ef6\u7b26\u5408\u6761\u4ef6\uff0c\u5219\u505a\u76f8\u5e94\u5904\u7406\uff0c\u5982\u5373\u5c06\u5f15\u5165\u7684\u6a21\u5757\u5339\u914d\u63d2\u4ef6\u9700\u8981\u4f5c\u4e3a\u5916\u90e8\u4f9d\u8d56\u6a21\u5757\u7684\u8bdd\uff0c\u90a3\u4e48\u6b64\u65f6\u5c31\u4e0d\u7528\u7f16\u8bd1\u76f4\u63a5\u5f53\u4f5c\u5916\u90e8\u6a21\u5757\u5904\u7406\u3002"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"JavaScriptParser Hook")),(0,r.yg)("p",null,"\u5728\u8bc6\u522b\u5230\u5f15\u5165\u65b0\u7684\u9700\u8981\u7f16\u8bd1\u7684\u6a21\u5757\u65f6 \uff0cwebpack \u5185\u90e8\u5b9e\u8d28\u4e0a\u5bf9\u4e8e\u65b0\u5f15\u5165\u7684\u6a21\u5757\u4f1a\u8fdb\u884c\u4e00\u4e2a\u6df1\u5ea6\u4f18\u5148\u7684\u8fc7\u7a0b\uff0c\u8fd9\u5c31\u662f Parser \u7684\u4f5c\u7528\u3002"),(0,r.yg)("p",null,"\u5f53\u7f16\u8bd1\u5f15\u5165\u6a21\u5757\u65f6\u96be\u514d\u4f1a\u6d89\u53ca AST \u62bd\u8c61\u8bed\u6cd5\u6811\u7684\u8f6c\u5316\uff0cNormalModuleFactory \u5c5e\u6027\u4e0a\u7684 parser hook \u5373\u662f\u9488\u5bf9\u4e8e",(0,r.yg)("strong",{parentName:"p"},"\u7f16\u8bd1\u6bcf\u4e00\u4e2a module \u751f\u6210 AST \u65f6"),"\u63d0\u4f9b\u7ed9\u63d2\u4ef6\u5f00\u53d1\u8005\u7684 hook \u5217\u8868"),(0,r.yg)("p",null,"NormalModuleFactory \u7684\u4f5c\u7528\u662f",(0,r.yg)("strong",{parentName:"p"},"\u751f\u6210 module"),"\uff0c\u800c\u751f\u6210\u7f16\u8bd1\u6a21\u5757\u65f6 AST \u5904\u7406\u5f53\u524d\u6a21\u5757\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684\u90e8\u5206\uff0c\u6240\u4ee5\u53ef\u4ee5\u901a\u8fc7 NormalModuleFactory.hooks.parser.somehook \u6ce8\u518c AST \u5904\u7406\u65f6\u7684\u4e8b\u4ef6\u51fd\u6570"),(0,r.yg)("h3",{id:"loader"},"loader"),(0,r.yg)("p",null,(0,r.yg)("img",{parentName:"p",src:"https://pic4.zhimg.com/80/v2-87544aa0248259a8111cd017eea92943_1440w.jpg",alt:null})),(0,r.yg)("h4",{id:"\u4ec0\u4e48\u662floader"},"\u4ec0\u4e48\u662floader"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"Loader"),"\u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u7528\u4e8e\u5bf9\u6a21\u5757\u7684\u6e90\u4ee3\u7801\u8fdb\u884c\u8f6c\u6362\uff0c \u53ef\u4ee5\u5c06\u6587\u4ef6\u4ece\u4e0d\u540c\u7684\u8bed\u8a00\uff08\u5982 TypeScript\uff09\u8f6c\u6362\u4e3a JavaScript \u6216\u5c06\u5185\u8054\u56fe\u50cf\u8f6c\u6362\u4e3a data URL\uff0c\u901a\u8fc7\u5b83\u6211\u4eec\u53ef\u4ee5\u5728",(0,r.yg)("inlineCode",{parentName:"p"},"webpack"),"\u5904\u7406\u7279\u5b9a\u8d44\u6e90(\u6587\u4ef6)\u4e4b\u524d\u8fdb\u884c\u63d0\u524d\u5904\u7406"),(0,r.yg)("p",null,"Loader\u662f\u4e00\u4e2a",(0,r.yg)("inlineCode",{parentName:"p"},"\u5177\u6709\u5355\u4e00\u804c\u8d23\u7684\u8f6c\u6362\u5668")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"\u8f6c\u6362\u5668"),"\u3002\u5728webpack\u4e2d\u4e00\u5207\u7686js\u6a21\u5757\uff0c\u800cloader\u7684\u4f5c\u7528\u5c31\u662f\u628a",(0,r.yg)("inlineCode",{parentName:"li"},"\u975ejs\u6a21\u5757\u8f6c\u5316\u4e3ajs\u6a21\u5757\uff0c\u4f9bwebpack\u8fdb\u884c\u6253\u5305\u5904\u7406"),"\u3002\u975ejs\u6a21\u5757\u5373\u6837\u5f0f\u6587\u4ef6\uff08.css\u3001.less\u3001.scss\u7b49\uff09\uff0c\u975e\u6807\u51c6JS\u6587\u4ef6\uff08.ts\u3001.jsx\u3001.vue\uff09\uff0c\u4ee5\u53ca\u5176\u4ed6\u7c7b\u578b\u7684\u6587\u4ef6\uff08svg\u3001png | jpg | jpeg\u7b49\uff09"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"\u5355\u4e00\u804c\u8d23"),"\uff0c\u6307\u4e00\u4e2aloader\u53ea\u8d1f\u8d23\u4e00\u79cd\u8f6c\u6362\u3002\u5355\u4e00\u804c\u8d23\u662fwebpack\u793e\u533a\u5bf9loader\u5b9a\u4e49\u7684\u7ea6\u675f\u3002\u5982\u679c\u4e00\u4e2a\u6e90\u6587\u4ef6\u9700\u8981\u7ecf\u5386\u591a\u6b65\u8f6c\u6362\u624d\u80fd\u88ab\u4f7f\u7528\uff0c\u5c31\u5e94\u8be5\u901a\u8fc7\u591a\u4e2aloader\u53bb\u8f6c\u6362")),(0,r.yg)("h4",{id:"loader\u5199\u6cd5"},"loader\u5199\u6cd5"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"// my-loader.js\nmodule.exports = function (content, map, meta) {\n  ...\n};\n")),(0,r.yg)("p",null,"Webpack \u4f1a\u5bf9loader\u6ce8\u5165\u4e09\u4e2a\u53c2\u6570\uff1a"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"content"),"\uff1a\u8d44\u6e90\u6587\u4ef6\u7684\u5185\u5bb9\u3002\u5bf9\u4e8e\u8d77\u59cbloader\uff0c\u53ea\u6709\u8fd9\u4e00\u4e2a\u53c2\u6570"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"map"),"\uff1a\u524d\u9762loader\u751f\u6210\u7684source map\uff0c\u53ef\u4ee5\u4f20\u9012\u7ed9\u540e\u65b9loader\u5171\u4eab"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"meta"),"\uff1a\u5176\u4ed6\u9700\u8981\u4f20\u7ed9\u540e\u65b9loader\u5171\u4eab\u7684\u4fe1\u606f\uff0c\u53ef\u81ea\u5b9a\u4e49")),(0,r.yg)("h4",{id:"loader\u662f\u7eaf\u51fd\u6570\u5417"},"Loader\u662f\u7eaf\u51fd\u6570\u5417\uff1f"),(0,r.yg)("p",null,"\u4ece\u5b9a\u4e49\u548c\u804c\u8d23\u6765\u770b\uff0cloader\u7684\u5b9e\u73b0\u5f88\u50cf\u662f\u4e00\u4e2a\u7eaf\u51fd\u6570\uff0c\u8f93\u5165\u4e00\u4e2a\u6587\u4ef6\uff0c\u8f93\u51fa\u8f6c\u6362\u540e\u7684\u5185\u5bb9\u7ed9\u4e0b\u4e00\u4e2aloader\u6216\u8005\u4ea4\u7ed9webpack\u5904\u7406\uff0c\u4f46loader\u4e0d\u662f\u7eaf\u51fd\u6570\uff0c\u4e3b\u8981\u6709\u4e24\u4e2a\u539f\u56e0\uff1a"),(0,r.yg)("p",null,"\u4e00\u662floader\u6709\u6267\u884c\u4e0a\u4e0b\u6587(context)\uff0c\u4e5f\u5c31\u662f\u901a\u8fc7this\u8bbf\u95ee\u5185\u7f6e\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u4ee5\u5b9e\u73b0\u7279\u5b9a\u7684\u529f\u80fd\uff1b"),(0,r.yg)("p",null,"\u4e8c\u662floader\u7684return\u8bed\u53e5\u4e0d\u4e00\u5b9a\u6709\u8fd4\u56de\u3002"),(0,r.yg)("h4",{id:"resolveloadermodules"},"resolveLoader.modules"),(0,r.yg)("p",null,"\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7",(0,r.yg)("inlineCode",{parentName:"p"},"resolveLoader.modules"),"\u5b9a\u4e49",(0,r.yg)("inlineCode",{parentName:"p"},"webpack"),"\u5728\u89e3\u6790",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u65f6\u5e94\u8be5\u67e5\u627e\u7684\u76ee\u5f55\uff0c\u6bd4\u5982:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const path = require('path')\n// webpack.config.js\nmodule.exports = {\n    ...\n    resolveLoader: {\n        modules: [ path.resolve(__dirname,'../loaders/') ]\n    },\n    module: {\n        rules: [\n            {\n                test:/\\.js$/,\n                loader: 'babel-loader'\n            }\n        ]\n    }\n}\n")),(0,r.yg)("h4",{id:"loader\u7684\u79cd\u7c7b"},(0,r.yg)("strong",{parentName:"h4"},"Loader"),"\u7684\u79cd\u7c7b"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"pre loader"),"\u3001",(0,r.yg)("inlineCode",{parentName:"p"},"normal loader"),"\u3001",(0,r.yg)("inlineCode",{parentName:"p"},"inline loader"),"\u3001",(0,r.yg)("inlineCode",{parentName:"p"},"post loader")),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u5230\u5e95\u662f",(0,r.yg)("inlineCode",{parentName:"p"},"pre"),"\u3001",(0,r.yg)("inlineCode",{parentName:"p"},"normal"),"\u3001",(0,r.yg)("inlineCode",{parentName:"p"},"inline"),"\u8fd8\u662f",(0,r.yg)("inlineCode",{parentName:"p"},"post"),"\u548c",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u5f00\u53d1\u672c\u8eab\u662f\u6ca1\u6709\u4efb\u4f55\u5173\u7cfb\u7684\u3002",(0,r.yg)("strong",{parentName:"p"},"\u6267\u884c\u987a\u5e8f\u4ec5\u4ec5\u53d6\u51b3\u4e8e",(0,r.yg)("inlineCode",{parentName:"strong"},"webpack"),"\u5e94\u7528",(0,r.yg)("inlineCode",{parentName:"strong"},"loader"),"\u65f6\u7684\u914d\u7f6e(\u6216\u8005\u5f15\u5165\u6587\u4ef6\u65f6\u5019\u6dfb\u52a0\u7684\u524d\u7f00)")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"module: {\n  rules: [\n    {\n      test: /\\.js$/,\n      use: ['pre-loader'],\n      enforce: 'pre',\n    },\n    {\n      test: /\\.js$/,\n      use: ['normal-loader'],\n    },\n    {\n      test: /\\.js$/,\n      use: ['post-loader'],\n      enforce: 'post',\n    },\n  ]\n}\n")),(0,r.yg)("p",null,"Inline loader\u4e5f\u53ef\u4ee5\u5411loader\u4f20\u9012\u53c2\u6570\uff0c\u652f\u6301url query\u65b9\u5f0f\u548cJSON\u65b9\u5f0f"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'import Styles from \'style-loader?key=value&foo=bar!css-loader?modules!./styles.css\';\n// \u6216\u8005\nimport Styles from \'style-loader?{"key": "value", "foo": "bar"}!css-loader?modules!./styles.css\';\n')),(0,r.yg)("p",null,"\u76f8\u5f53\u4e8e\u914d\u7f6e\u6587\u4ef6\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"[\n  {\n    loader: 'style-loader',\n    options: { key: 'value', foo: 'bar' }\n  },\n  {\n    loader: 'css-loader',\n    options: { modules: true }\n  },\n]\n")),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"Tip\uff1a \u5b98\u65b9\u8fc7\u63a8\u8350\u5c3d\u53ef\u80fd\u4f7f\u7528module.rules\uff0c\u800c\u907f\u514d\u5199inline loader\uff0c\u8fd9\u6837\u53ef\u4ee5\u51cf\u5c11\u6e90\u7801\u4e2d\u6837\u677f\u6587\u4ef6\u7684\u4ee3\u7801\u91cf\uff0c\u5e76\u4e14\u53ef\u4ee5\u51cf\u5c11\u7cfb\u7edf\u7684\u7ef4\u62a4\u6210\u672c\u3002Inline-loader\u4e00\u822c\u53ea\u9488\u5bf9\u67d0\u4e9b\u9700\u8981\u7279\u6b8a\u5904\u7406\u7684\u6a21\u5757\u4f7f\u7528\u3002")),(0,r.yg)("p",null,"\u4f7f\u7528 ",(0,r.yg)("inlineCode",{parentName:"p"},"!")," \u524d\u7f00\uff0c\u5c06\u7981\u7528\u6240\u6709\u5df2\u914d\u7f6e\u7684 normal loader(\u666e\u901a loader)"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"import Styles from '!style-loader!css-loader?modules!./styles.css';\n")),(0,r.yg)("p",null,"\u4f7f\u7528 ",(0,r.yg)("inlineCode",{parentName:"p"},"!!")," \u524d\u7f00\uff0c\u5c06\u7981\u7528\u6240\u6709\u5df2\u914d\u7f6e\u7684 loader\uff08preLoader, loader, postLoader\uff09"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"import Styles from '!!style-loader!css-loader?modules!./styles.css';\n")),(0,r.yg)("p",null,"\u4f7f\u7528 ",(0,r.yg)("inlineCode",{parentName:"p"},"-!")," \u524d\u7f00\uff0c\u5c06\u7981\u7528\u6240\u6709\u5df2\u914d\u7f6e\u7684 preLoader \u548c loader\uff0c\u4f46\u662f\u4e0d\u7981\u7528 postLoaders"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"import Styles from '-!style-loader!css-loader?modules!./styles.css';\n")),(0,r.yg)("p",null,"\u5047\u5982js\u6587\u4ef6\u4e2d\u5bf9inline-loader\u7684\u8c03\u7528\u5e26\u6709\u524d\u7f00\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"// demo.js\n\nconst someModule = import('-!inline-loader-a!inline-loader-b!./someModule.js'); // \u4f7f\u7528 -! \u524d\u7f00\u7981\u7528\u914d\u7f6e\u4e2d\u7684pre loader\u548cnormal loader\n")),(0,r.yg)("p",null,"\u90a3\u4e48\u6267\u884c\u987a\u5e8f\u4f1a\u53d8\u4e3a\uff1a"),(0,r.yg)("p",null,(0,r.yg)("img",{parentName:"p",src:"https://pic1.zhimg.com/80/v2-8a0b47101cdcfdde2f57eea9a4611b80_1440w.jpg",alt:null})),(0,r.yg)("p",null,"\u5728\u4e0a\u8ff0\u524d\u63d0\u4e0b\uff0c\u82e5inline-loader-b\u7684pitch\u65b9\u6cd5\u6709\u8fd4\u56de\u503c\uff0c\u90a3\u4e48\u6267\u884c\u987a\u5e8f\u53c8\u4f1a\u53d8\u4e3a\uff1a"),(0,r.yg)("p",null,(0,r.yg)("img",{parentName:"p",src:"https://pic2.zhimg.com/80/v2-edde517a0a992be79c7af5d6c309f62d_1440w.jpg",alt:null})),(0,r.yg)("h4",{id:"loader\u7684\u6267\u884c\u987a\u5e8f"},(0,r.yg)("strong",{parentName:"h4"},"Loader"),"\u7684\u6267\u884c\u987a\u5e8f"),(0,r.yg)("p",null,(0,r.yg)("img",{parentName:"p",src:"https://raw.githubusercontent.com/Minyym/figure-bed/master/img/202305101702769.png",alt:null})),(0,r.yg)("h5",{id:"loader-\u7684-pitch-\u9636\u6bb5"},"loader \u7684 pitch \u9636\u6bb5"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u5728\u5904\u7406\u6587\u4ef6\u8d44\u6e90\u65f6\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5: ",(0,r.yg)("inlineCode",{parentName:"p"},"pitch"),"\u9636\u6bb5\u548c",(0,r.yg)("inlineCode",{parentName:"p"},"nomral"),"\u9636\u6bb5\uff1a"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Pitching")," \u9636\u6bb5: loader \u4e0a\u7684 pitch \u65b9\u6cd5\uff0c\u6309\u7167 ",(0,r.yg)("inlineCode",{parentName:"p"},"\u540e\u7f6e(post)\u3001\u884c\u5185(inline)\u3001\u666e\u901a(normal)\u3001\u524d\u7f6e(pre)")," \u7684\u987a\u5e8f\u8c03\u7528\u3002"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Normal")," \u9636\u6bb5: loader \u4e0a\u7684 \u5e38\u89c4\u65b9\u6cd5\uff0c\u6309\u7167 ",(0,r.yg)("inlineCode",{parentName:"p"},"\u524d\u7f6e(pre)\u3001\u666e\u901a(normal)\u3001\u884c\u5185(inline)\u3001\u540e\u7f6e(post)")," \u7684\u987a\u5e8f\u8c03\u7528\u3002"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"\u5728\u5904\u7406\u8d44\u6e90\u6587\u4ef6\u4e4b\u524d\uff0c\u9996\u5148\u4f1a\u7ecf\u5386",(0,r.yg)("inlineCode",{parentName:"p"},"pitch"),"\u9636\u6bb5\u3002")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("inlineCode",{parentName:"p"},"pitch"),"\u7ed3\u675f\u540e\uff0c\u8bfb\u53d6\u8d44\u6e90\u6587\u4ef6\u5185\u5bb9\u3002")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"\u7ecf\u8fc7",(0,r.yg)("inlineCode",{parentName:"p"},"pitch"),"\u5904\u7406\u540e\uff0c\u8bfb\u53d6\u5230\u4e86\u8d44\u6e90\u6587\u4ef6\uff0c\u6b64\u65f6\u624d\u4f1a\u5c06\u8bfb\u53d6\u5230\u7684\u8d44\u6e90\u6587\u4ef6\u5185\u5bb9\u4ea4\u7ed9\u6b63\u5e38\u9636\u6bb5\u7684",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u8fdb\u884c\u5904\u7406"))),(0,r.yg)("h5",{id:"pitch-loader\u7684\u7194\u65ad\u6548\u679c"},(0,r.yg)("inlineCode",{parentName:"h5"},"pitch Loader"),"\u7684\u7194\u65ad\u6548\u679c"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"\u4e00\u65e6\u5728\u67d0\u4e00\u4e2a",(0,r.yg)("inlineCode",{parentName:"strong"},"loader"),"\u7684",(0,r.yg)("inlineCode",{parentName:"strong"},"pitch"),"\u9636\u51fd\u6570\u4e2d\u8fd4\u56de\u4e00\u4e2a\u975e",(0,r.yg)("inlineCode",{parentName:"strong"},"undefined"),"\u7684\u503c\u5c31\u4f1a\u53d1\u751f\u7194\u65ad\u7684\u6548\u679c\uff1a")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"// inline1-loader normal\nfunction inline1Loader () {\n    // dosomething\n}\n// inline1-loader pitch\ninline1Loader.pitch = function () {\n    // do something\n    return '19Qingfeng'\n}\n")),(0,r.yg)("p",null,(0,r.yg)("img",{parentName:"p",src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4df62ce00b9745fab4dee2dc098ddb09~tplv-k3u1fbpfcp-watermark.awebp?",alt:null})),(0,r.yg)("p",null,"\u5728",(0,r.yg)("inlineCode",{parentName:"p"},"inline1-loader"),"\u7684",(0,r.yg)("inlineCode",{parentName:"p"},"pitch"),"\u51fd\u6570\u4e2d\u8fd4\u56de\u4e86\u4e00\u4e2a\u5b57\u7b26\u4e32",(0,r.yg)("inlineCode",{parentName:"p"},"19Qingfeng"),"\u65f6\uff0c",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u7684\u6267\u884c\u94fe\u6761\u4f1a\u88ab\u963b\u65ad\uff0c\u76f4\u63a5\u6389\u5934\u6267\u884c\u4e0a\u4e00\u4e2a\u5df2\u7ecf\u6267\u884c\u7684",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u7684",(0,r.yg)("inlineCode",{parentName:"p"},"normal"),"\u9636\u6bb5\u5e76\u4e14\u5c06",(0,r.yg)("inlineCode",{parentName:"p"},"pitch"),"\u7684\u8fd4\u56de\u503c\u4f20\u9012\u7ed9\u4e0b\u4e00\u4e2a",(0,r.yg)("inlineCode",{parentName:"p"},"normal loader"),",\u8fd9\u5c31\u662f",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u7684\u7194\u65ad\u6548\u679c"),(0,r.yg)("h4",{id:"\u540c\u6b65loader"},"\u540c\u6b65Loader"),(0,r.yg)("p",null,"\u540c\u6b65",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u5c31\u662f\u5728",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u672c\u8eab\u9636\u6bb5\u540c\u6b65\u5904\u7406\u5bf9\u5e94\u903b\u8f91\u4ece\u800c\u8fd4\u56de\u5bf9\u5e94\u7684\u503c:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"// \u540c\u6b65loader\n// \u5173\u4e8eloader\u7684source\u53c2\u6570 \u6211\u4eec\u4f1a\u5728\u540e\u7eed\u8be6\u5c3d\u8bb2\u8ff0\u5230 \u8fd9\u91cc\u4f60\u53ef\u4ee5\u7406\u89e3\u4e3a\u9700\u8981\u5904\u7406\u7684\u6587\u4ef6\u5185\u5bb9\nfunction loader(source) {\n    // ...\n    // \u4e00\u7cfb\u5217\u540c\u6b65\u903b\u8f91 \u6700\u7ec8\u51fd\u6570\u8fd4\u56de\u5904\u7406\u540e\u7684\u7ed3\u679c\u4ea4\u7ed9\u4e0b\u4e00\u4e2a\u9636\u6bb5\n    return source\n}\n\n// pitch\u9636\u6bb5\u7684\u540c\u6b65\u540c\u7406\nloader.pitch = function () {\n    // \u4e00\u7cfb\u5217\u540c\u6b65\u64cd\u4f5c \u51fd\u6570\u6267\u884c\u5b8c\u6bd5\u5219pitch\u6267\u884c\u5b8c\u6bd5\n}\n")),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"\u540c\u65f6\u5982\u679c\u9700\u8981\u8fd4\u56de\u591a\u4e2a\u503c\u65f6\u4e5f\u53ef\u4ee5\u901a\u8fc7",(0,r.yg)("inlineCode",{parentName:"p"},"this.callback()"),"\u8868\u793a",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u7ed3\u675f\u4f20\u5165\u591a\u4e2a\u503c\u8fdb\u884c\u8fd4\u56de\uff0c\u6bd4\u5982",(0,r.yg)("inlineCode",{parentName:"p"},"this.callback(error,value2,...)"),",\u9700\u8981\u6ce8\u610f",(0,r.yg)("inlineCode",{parentName:"p"},"this.callback"),"\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e00\u5b9a\u662f\u8868\u793a\u662f\u5426\u5b58\u5728\u9519\u8bef\u3002\u5177\u4f53\u4f60\u53ef\u4ee5\u5728",(0,r.yg)("a",{parentName:"p",href:"https://link.juejin.cn?target=https%3A%2F%2Fwebpack.js.org%2Fapi%2Floaders%2F%23thiscallback"},"\u8fd9\u91cc"),"\u8fdb\u884c\u67e5\u770b\u66f4\u52a0\u8be6\u7ec6\u7684\u7528\u6cd5\u3002\u9700\u8981\u989d\u5916\u6ce8\u610f\u7684\u662f\uff0c\u5728",(0,r.yg)("inlineCode",{parentName:"p"},"normal"),"\u9636\u6bb5\u7684\u6700\u540e\u4e00\u4e2a",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u4e00\u5b9a\u9700\u8981\u8fd4\u56de\u4e00\u4e2a",(0,r.yg)("inlineCode",{parentName:"p"},"js"),"\u4ee3\u7801(\u4e00\u4e2a",(0,r.yg)("inlineCode",{parentName:"p"},"module"),"\u7684\u4ee3\u7801\uff0c\u6bd4\u5982\u5305\u542b",(0,r.yg)("inlineCode",{parentName:"p"},"module.exports"),"\u8bed\u53e5)\u3002")),(0,r.yg)("h4",{id:"\u5f02\u6b65loader"},"\u5f02\u6b65Loader"),(0,r.yg)("p",null,"\u5982\u679c\u9700\u8981\u5728",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u5185\u90e8\u8c03\u7528\u4e00\u4e9b\u8fdc\u7a0b\u63a5\u53e3\u6216\u8005\u5b9a\u65f6\u5668\u4e4b\u7c7b\u7684\u64cd\u4f5c\u3002\u6b64\u65f6\u5c31\u9700\u8981",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u53ef\u4ee5\u7b49\u5f85\u5f02\u6b65\u8fd4\u56de\u7ed3\u675f\u540e\u624d\u7ee7\u7eed\u6267\u884c\u4e0b\u4e00\u4e2a\u9636\u6bb5\u5904\u7406\uff1a"),(0,r.yg)("p",null,"\u5c06",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u53d8\u4e3a\u5f02\u6b65",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u6709\u4e24\u79cd\u65b9\u5f0f:"),(0,r.yg)("h5",{id:"\u8fd4\u56depromise"},"\u8fd4\u56de",(0,r.yg)("inlineCode",{parentName:"h5"},"Promise")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"funciton asyncLoader() {\n    // dosomething\n    return Promise((resolve) => {\n        setTimeout(() => {\n            // resolve\u7684\u503c\u76f8\u5f53\u4e8e\u540c\u6b65loader\u7684\u8fd4\u56de\u503c\n            resolve('19Qingfeng')\n        },3000)\n    })\n}\n")),(0,r.yg)("h5",{id:"\u901a\u8fc7thisasync"},"\u901a\u8fc7",(0,r.yg)("inlineCode",{parentName:"h5"},"this.async")),(0,r.yg)("p",null,"\u901a\u8fc7\u5728",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u5185\u90e8\u8c03\u7528",(0,r.yg)("inlineCode",{parentName:"p"},"this.async"),"\u51fd\u6570\u5c06",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u53d8\u4e3a\u5f02\u6b65\uff0c\u540c\u65f6",(0,r.yg)("inlineCode",{parentName:"p"},"this.async"),"\u4f1a\u8fd4\u56de\u4e00\u4e2a",(0,r.yg)("inlineCode",{parentName:"p"},"callback"),"\u7684\u65b9\u5f0f\u3002\u53ea\u6709\u5f53\u8c03\u7528",(0,r.yg)("inlineCode",{parentName:"p"},"callback"),"\u65b9\u6cd5\u624d\u4f1a\u7ee7\u7eed\u6267\u884c\u540e\u7eed\u9636\u6bb5\u5904\u7406\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"function asyncLoader() {\n    const callback = this.async()\n    // dosomething\n    \n    // \u8c03\u7528callback\u544a\u8bc9loader-runner\u5f02\u6b65loader\u7ed3\u675f\n    callback('19Qingfeng')\n}\n")),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"\u540c\u6837",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u7684",(0,r.yg)("inlineCode",{parentName:"p"},"pitch"),"\u9636\u6bb5\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4e0a\u8ff0\u4e24\u4e2a\u65b9\u6848\u53d8\u6210\u5f02\u6b65",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u3002")),(0,r.yg)("h4",{id:"pitch-loader-\u53c2\u6570"},"pitch loader \u53c2\u6570"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"// normal loader\nfunction loader(source) {\n    // ...\n    return source\n}\n\n// pitch loader\nloader.pitch = function (remainingRequest,previousRequest,data) {\n    // ...\n}\n")),(0,r.yg)("h5",{id:"remainingrequest"},"remainingRequest"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"remainingRequest"),"\u8868\u793a",(0,r.yg)("strong",{parentName:"p"},"\u5269\u4f59\u9700\u8981\u5904\u7406\u7684",(0,r.yg)("inlineCode",{parentName:"strong"},"loader"),"\u7684\u7edd\u5bf9\u8def\u5f84\u4ee5",(0,r.yg)("inlineCode",{parentName:"strong"},"!"),"\u5206\u5272\u7ec4\u6210\u7684\u5b57\u7b26\u4e32"),"\u3002"),(0,r.yg)("p",null,(0,r.yg)("img",{parentName:"p",src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fbe34a211d2b403cbbd9ea1a394278f5~tplv-k3u1fbpfcp-watermark.awebp?",alt:null})),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"loader1.pitch"),"\u7684",(0,r.yg)("inlineCode",{parentName:"p"},"remainingRequest"),"\u7684\u503c\u4e3a",(0,r.yg)("inlineCode",{parentName:"p"},"xxx/loader2.js!xxx/loader3.js\uff0c"),"loader2.pitch",(0,r.yg)("inlineCode",{parentName:"p"},"\u7684"),"remainingRequest",(0,r.yg)("inlineCode",{parentName:"p"},"\u7684\u503c\u4e3a"),"xxx/loader3.js`"),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"\u9700\u8981\u6ce8\u610f\u7684\u662f",(0,r.yg)("inlineCode",{parentName:"p"},"remainingRequest"),"\u4e0e\u5269\u4f59",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u6709\u6ca1\u6709",(0,r.yg)("inlineCode",{parentName:"p"},"pitch"),"\u5c5e\u6027\u6ca1\u6709\u5173\u7cfb\uff0c\u65e0\u8bba\u662f\u5426\u5b58\u5728",(0,r.yg)("inlineCode",{parentName:"p"},"pitch"),"\u5c5e\u6027",(0,r.yg)("inlineCode",{parentName:"p"},"remainingRequest"),"\u90fd\u4f1a\u8ba1\u7b97",(0,r.yg)("inlineCode",{parentName:"p"},"pitch"),"\u9636\u6bb5\u8fd8\u672a\u5904\u7406\u5269\u4f59\u7684",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u3002")),(0,r.yg)("h5",{id:"previousrequest"},"previousRequest"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"\u8868\u793a",(0,r.yg)("inlineCode",{parentName:"strong"},"pitch"),"\u9636\u6bb5\u5df2\u7ecf\u8fed\u4ee3\u8fc7\u7684",(0,r.yg)("inlineCode",{parentName:"strong"},"loader"),"\u6309\u7167",(0,r.yg)("inlineCode",{parentName:"strong"},"!"),"\u5206\u5272\u7ec4\u6210\u7684\u5b57\u7b26\u4e32"),"\u3002"),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"\u6ce8\u610f\u540c\u6837",(0,r.yg)("inlineCode",{parentName:"p"},"previousRequest"),"\u548c\u6709\u65e0",(0,r.yg)("inlineCode",{parentName:"p"},"pitch"),"\u5c5e\u6027\u6ca1\u6709\u4efb\u4f55\u5173\u7cfb\u3002\u540c\u65f6",(0,r.yg)("inlineCode",{parentName:"p"},"remainingRequest"),"\u548c",(0,r.yg)("inlineCode",{parentName:"p"},"previousRequest"),"\u90fd\u662f\u4e0d\u5305\u62ec\u81ea\u8eab\u7684")),(0,r.yg)("h4",{id:"data"},"data"),(0,r.yg)("p",null,"\u9ed8\u8ba4\u662f\u4e00\u4e2a\u7a7a\u5bf9\u8c61",(0,r.yg)("inlineCode",{parentName:"p"},"{}"),"\u3002"),(0,r.yg)("p",null,"\u5728",(0,r.yg)("inlineCode",{parentName:"p"},"normalLoader"),"\u4e0e",(0,r.yg)("inlineCode",{parentName:"p"},"pitch Loader"),"\u8fdb\u884c\u4ea4\u4e92\u6b63\u662f\u5229\u7528\u4e86\u7b2c\u4e09\u4e2a",(0,r.yg)("inlineCode",{parentName:"p"},"data"),"\u53c2\u6570\u3002"),(0,r.yg)("p",null,"\u4ee5",(0,r.yg)("inlineCode",{parentName:"p"},"loader2"),"\u6765\u4e3e\u4f8b:"),(0,r.yg)("p",null,(0,r.yg)("img",{parentName:"p",src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/70bda509aa744b9eab4a0eb3ce6fc97a~tplv-k3u1fbpfcp-watermark.awebp?",alt:null})),(0,r.yg)("h4",{id:"loader\u7684raw\u5c5e\u6027"},(0,r.yg)("inlineCode",{parentName:"h4"},"loader"),"\u7684",(0,r.yg)("inlineCode",{parentName:"h4"},"raw"),"\u5c5e\u6027"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"normal Loader"),"\u7684\u53c2\u6570\u4f1a\u63a5\u53d7\u524d\u7f6e",(0,r.yg)("inlineCode",{parentName:"p"},"normal loader")," or \u5bf9\u5e94\u8d44\u6e90\u6587\u4ef6(\u5f53\u5b83\u4e3a\u7b2c\u4e00\u4e2a",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u8fd8\u672a\u7ecf\u8fc7\u4efb\u4f55",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u5904\u7406\u65f6) \u7684\u5185\u5bb9\u3002\u8fd9\u4e2a\u5185\u5bb9\u9ed8\u8ba4\u662f\u4e00\u4e2a",(0,r.yg)("inlineCode",{parentName:"p"},"string"),"\u7c7b\u578b\u7684\u5b57\u7b26\u4e32\u3002"),(0,r.yg)("p",null,"\u9488\u5bf9\u4e8e\u56fe\u7247\u7684\u64cd\u4f5c",(0,r.yg)("strong",{parentName:"p"},"\u901a\u5e38\u8bfb\u53d6\u7684\u662f\u56fe\u7247\u8d44\u6e90\u7684",(0,r.yg)("inlineCode",{parentName:"strong"},"Buffer"),"\u7c7b\u578b\u800c\u975e\u5b57\u7b26\u4e32\u7c7b\u578b"),"\u3002"),(0,r.yg)("p",null,"\u6b64\u65f6\u53ef\u4ee5\u901a\u8fc7",(0,r.yg)("inlineCode",{parentName:"p"},"loader.raw"),"\u6807\u8bb0",(0,r.yg)("inlineCode",{parentName:"p"},"normal loader"),"\u7684\u53c2\u6570\u662f",(0,r.yg)("inlineCode",{parentName:"p"},"Buffer"),"\u8fd8\u662f",(0,r.yg)("inlineCode",{parentName:"p"},"String"),":"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"\u5f53",(0,r.yg)("inlineCode",{parentName:"li"},"loader.raw"),"\u4e3a",(0,r.yg)("inlineCode",{parentName:"li"},"false"),"\u65f6\uff0c\u83b7\u53d6\u7684\u662f\u4e00\u4e2a",(0,r.yg)("inlineCode",{parentName:"li"},"String"),"\u7c7b\u578b\uff0c\u8fd9\u662f\u9ed8\u8ba4\u7684"),(0,r.yg)("li",{parentName:"ul"},"\u5f53",(0,r.yg)("inlineCode",{parentName:"li"},"loader.raw"),"\u4e3a",(0,r.yg)("inlineCode",{parentName:"li"},"true"),"\u65f6\uff0c\u6b64\u65f6\u8fd9\u4e2a",(0,r.yg)("inlineCode",{parentName:"li"},"loader"),"\u7684",(0,r.yg)("inlineCode",{parentName:"li"},"normal"),"\u51fd\u6570\u63a5\u53d7\u7684",(0,r.yg)("inlineCode",{parentName:"li"},"source"),"\u53c2\u6570\u5c31\u662f\u4e00\u4e2a",(0,r.yg)("inlineCode",{parentName:"li"},"Buffer"),"\u7c7b\u578b\u3002")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"function loader2(source) {\n    // \u6b64\u65f6source\u662f\u4e00\u4e2aBuffer\u7c7b\u578b \u800c\u975e\u6a21\u578b\u7684string\u7c7b\u578b\n}\n\nloader2.raw = true\n\nmodule.exports = loader2\n")),(0,r.yg)("h4",{id:"\u7f13\u5b58"},"\u7f13\u5b58"),(0,r.yg)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cwebpack\u4f1a\u7f13\u5b58loader\u7684\u8f93\u51fa\u7ed3\u679c\uff0c\u8f93\u5165\u548c\u76f8\u5173\u4f9d\u8d56\uff08\u901a\u8fc7this.addDependency\u6216this.addContextDependency\u6dfb\u52a0\uff09\u6ca1\u6709\u53d8\u5316\u65f6\uff0c\u4f1a\u8fd4\u56de\u76f8\u540c\u7684\u7ed3\u679c\u3002"),(0,r.yg)("p",null,"\u53ef\u901a\u8fc7\u5728loader\u4e2d\u6267\u884c",(0,r.yg)("inlineCode",{parentName:"p"},"this.cacheable(false)"),"\u5173\u95ed\u7f13\u5b58\u529f\u80fd\u3002"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"cacheable(flag = true: boolean)\n")),(0,r.yg)("h4",{id:"loader-runner"},"loader-runner"),(0,r.yg)("p",null,"Loader\u7684\u5b9e\u73b0\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u65b9\u6cd5\uff0c\u8f93\u5165\u4e00\u4e2a\u6a21\u5757\u540e\uff0c\u5728webpack\u5185\u90e8\u7531",(0,r.yg)("strong",{parentName:"p"},(0,r.yg)("a",{parentName:"strong",href:"https://link.zhihu.com/?target=https%3A//github.com/webpack/loader-runner"},"loader-runner")),"\u8d1f\u8d23\u7ec4\u7ec7\u548c\u8c03\u7528loader\uff0c\u5de5\u4f5c\u6d41\u7a0b\u5982\u4e0b\uff1a"),(0,r.yg)("p",null,(0,r.yg)("img",{parentName:"p",src:"https://pic4.zhimg.com/80/v2-aaf357e351a5ccca061c406fb061400b_1440w.jpg",alt:null})),(0,r.yg)("h5",{id:"\u63a5\u6536\u53c2\u6570"},"\u63a5\u6536\u53c2\u6570"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'runLoaders(options, callback) {\n    // read options\n    var resource = options.resource || "";\n    var loaders = options.loaders || [];\n    var loaderContext = options.context || {};\n    var processResource = options.processResource || ((readResource, context, resource, callback) => {\n        context.addDependency(resource);\n        readResource(resource, callback);\n    }).bind(null, options.readResource || readFile);\n    ...\n}\n')),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"source"),": ",(0,r.yg)("inlineCode",{parentName:"li"},"resource"),"\u53c2\u6570\u8868\u793a\u9700\u8981\u52a0\u8f7d\u7684\u8d44\u6e90\u8def\u5f84\u3002"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"loaders"),": \u8868\u793a\u9700\u8981\u5904\u7406\u7684 ",(0,r.yg)("inlineCode",{parentName:"li"},"loader")," \u7edd\u5bf9\u8def\u5f84\u7684\u5b57\u7b26\u4e32\u6570\u7ec4\u3002"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"context"),": ",(0,r.yg)("inlineCode",{parentName:"li"},"loader"),"\u4e0a\u4e0b\u6587\u5bf9\u8c61\uff0c",(0,r.yg)("inlineCode",{parentName:"li"},"webpack"),"\u4f1a\u5728\u8fdb\u5165",(0,r.yg)("inlineCode",{parentName:"li"},"loader"),"\u524d\u521b\u5efa\u4e00\u7cfb\u5217\u5c5e\u6027\u6302\u8f7d\u5728\u4e00\u4e2a",(0,r.yg)("inlineCode",{parentName:"li"},"object"),"\u4e0a\uff0c\u800c\u540e\u4f20\u9012\u7ed9",(0,r.yg)("inlineCode",{parentName:"li"},"loader"),"\u5185\u90e8\u3002")),(0,r.yg)("p",null,"\u6bd4\u5982",(0,r.yg)("inlineCode",{parentName:"p"},"this.getOptions()"),"\u65b9\u6cd5\u83b7\u5f97",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u7684\u914d\u7f6e",(0,r.yg)("inlineCode",{parentName:"p"},"options"),"\u53c2\u6570\u5c31\u662f\u5728\u8fdb\u5165",(0,r.yg)("inlineCode",{parentName:"p"},"runLoader"),"\u51fd\u6570\u524d",(0,r.yg)("inlineCode",{parentName:"p"},"webpack"),"\u5c06",(0,r.yg)("inlineCode",{parentName:"p"},"getOptions"),"\u65b9\u6cd5\u5b9a\u4e49\u5728\u4e86",(0,r.yg)("inlineCode",{parentName:"p"},"loaderContext"),"\u5bf9\u8c61\u4e2d\u4f20\u9012\u7ed9",(0,r.yg)("inlineCode",{parentName:"p"},"context"),"\u53c2\u6570\u3002"),(0,r.yg)("p",null,"\u53ef\u4ee5\u7406\u89e3\u8fd9\u4e2a\u53c2\u6570\u5c31\u662f",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u7684\u4e0a\u4e0b\u6587\u5bf9\u8c61\uff0c\u5373",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u51fd\u6570\u4e2d\u7684",(0,r.yg)("inlineCode",{parentName:"p"},"this")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"processResource"),": \u8bfb\u53d6\u8d44\u6e90\u6587\u4ef6\u7684\u65b9\u6cd5\uff0c\u53ef\u7b80\u5355\u7406\u89e3\u4e3a ",(0,r.yg)("inlineCode",{parentName:"li"},"fs.readFile"))),(0,r.yg)("h5",{id:"iteratepitchingloaders"},"iteratePitchingLoaders"),(0,r.yg)("p",null,"\u5728\u521b\u5efa",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u5bf9\u8c61\u3001\u8d4b\u503c",(0,r.yg)("inlineCode",{parentName:"p"},"loaderContext"),"\u5c5e\u6027\u540e\uff0c\u5c31\u8981\u8fdb\u5165\u6bcf\u4e00\u4e2a",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u7684",(0,r.yg)("inlineCode",{parentName:"p"},"pitch"),"\u6267\u884c\u9636\u6bb5\u3002"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"iteratePitchingLoaders"),"\u4f20\u5165\u4e86\u4e09\u4e2a\u53c2\u6570:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"processOptions"),": \u5b58\u5728\u4e00\u4e2a",(0,r.yg)("inlineCode",{parentName:"li"},"resourceBuffer"),"\u5c5e\u6027\u7528\u6765\u4fdd\u5b58\u672a\u7ecf\u8fc7",(0,r.yg)("inlineCode",{parentName:"li"},"loader"),"\u5904\u7406\u524d",(0,r.yg)("inlineCode",{parentName:"li"},"Buffer"),"\u7c7b\u578b\u7684\u8d44\u6e90\u6587\u4ef6\u5185\u5bb9\u3002"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"loaderContext"),": ",(0,r.yg)("inlineCode",{parentName:"li"},"loader"),"\u4e0a\u4e0b\u6587\u5bf9\u8c61\u3002"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"callback"),": \u8fd9\u4e2a\u65b9\u6cd5\u5185\u90e8\u8c03\u7528\u4e86",(0,r.yg)("inlineCode",{parentName:"li"},"runLoaders"),"\u65b9\u6cd5\u5916\u90e8\u4f20\u5165\u7684",(0,r.yg)("inlineCode",{parentName:"li"},"callback"),"\uff0c\u7528\u6765\u5728\u56de\u8c03\u51fd\u6570\u4e2d\u8c03\u7528\u6700\u7ec8\u7684",(0,r.yg)("inlineCode",{parentName:"li"},"runLoaders"),"\u65b9\u6cd5\u7684\u7ed3\u679c\u3002")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"/**\n * \u8fed\u4ee3pitch-loaders\n * \u6838\u5fc3\u601d\u8def: \u6267\u884c\u7b2c\u4e00\u4e2aloader\u7684pitch \u4f9d\u6b21\u8fed\u4ee3 \u5982\u679c\u5230\u4e86\u6700\u540e\u4e00\u4e2a\u7ed3\u675f \u5c31\u5f00\u59cb\u8bfb\u53d6\u6587\u4ef6\n * @param {*} options processOptions\u5bf9\u8c61\n * @param {*} loaderContext loader\u4e2d\u7684this\u5bf9\u8c61\n * @param {*} callback runLoaders\u4e2d\u7684callback\u51fd\u6570\n */\nfunction iteratePitchingLoaders(options, loaderContext, callback) {\n  // \u8d85\u51faloader\u4e2a\u6570 \u8868\u793a\u6240\u6709pitch\u5df2\u7ecf\u7ed3\u675f \u90a3\u4e48\u6b64\u65f6\u9700\u8981\u5f00\u59cb\u8bfb\u53d6\u8d44\u6e90\u6587\u4ef6\u5185\u5bb9\n  if (loaderContext.loaderIndex >= loaderContext.loaders.length) {\n    return processResource(options, loaderContext, callback);\n  }\n\n  const currentLoaderObject = loaderContext.loaders[loaderContext.loaderIndex];\n\n  // \u5f53\u524dloader\u7684pitch\u5df2\u7ecf\u6267\u884c\u8fc7\u4e86 \u7ee7\u7eed\u9012\u5f52\u6267\u884c\u4e0b\u4e00\u4e2a\n  if (currentLoaderObject.pitchExecuted) {\n    loaderContext.loaderIndex++;\n    return iteratePitchingLoaders(options, loaderContext, callback);\n  }\n  \n  const pitchFunction = currentLoaderObject.pitch;\n\n  // \u6807\u8bb0\u5f53\u524dloader pitch\u5df2\u7ecf\u6267\u884c\u8fc7\n  currentLoaderObject.pitchExecuted = true;\n\n  // \u5982\u679c\u5f53\u524dloader\u4e0d\u5b58\u5728pitch\u9636\u6bb5\n  if (!currentLoaderObject.pitch) {\n    return iteratePitchingLoaders(options, loaderContext, callback);\n  }\n\n  // \u5b58\u5728pitch\u9636\u6bb5 \u5e76\u4e14\u5f53\u524dpitch loader\u4e5f\u672a\u6267\u884c\u8fc7 \u8c03\u7528loader\u7684pitch\u51fd\u6570\n  runSyncOrAsync(\n    pitchFunction,\n    loaderContext,\n    [\n      currentLoaderObject.remainingRequest,\n      currentLoaderObject.previousRequest,\n      currentLoaderObject.data,\n    ],\n    function (err, ...args) {\n      if (err) {\n        // \u5b58\u5728\u9519\u8bef\u76f4\u63a5\u8c03\u7528callback \u8868\u793arunLoaders\u6267\u884c\u5b8c\u6bd5\n        return callback(err);\n      }\n      // \u6839\u636e\u8fd4\u56de\u503c \u5224\u65ad\u662f\u5426\u9700\u8981\u7194\u65ad or \u7ee7\u7eed\u5f80\u4e0b\u6267\u884c\u4e0b\u4e00\u4e2apitch\n      // pitch\u51fd\u6570\u5b58\u5728\u8fd4\u56de\u503c -> \u8fdb\u884c\u7194\u65ad \u6389\u5934\u6267\u884cnormal-loader\n      // pitch\u51fd\u6570\u4e0d\u5b58\u5728\u8fd4\u56de\u503c -> \u7ee7\u7eed\u8fed\u4ee3\u4e0b\u4e00\u4e2a iteratePitchLoader\n      const hasArg = args.some((i) => i !== undefined);\n      if (hasArg) {\n        loaderContext.loaderIndex--;\n        // \u7194\u65ad \u76f4\u63a5\u8fd4\u56de\u8c03\u7528normal-loader\n        iterateNormalLoaders(options, loaderContext, args, callback);\n      } else {\n        // \u8fd9\u4e2apitch-loader\u6267\u884c\u5b8c\u6bd5\u540e \u7ee7\u7eed\u8c03\u7528\u4e0b\u4e00\u4e2aloader\n        iteratePitchingLoaders(options, loaderContext, callback);\n      }\n    }\n  );\n}\n")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"processResource"),"\u65b9\u6cd5\u662f\u8bfb\u53d6\u8d44\u6e90\u6587\u4ef6\u5185\u5bb9\u7684\u65b9\u6cd5\uff0c\u5f53\u6240\u6709",(0,r.yg)("inlineCode",{parentName:"li"},"pitch"),"\u6267\u884c\u5b8c\u6bd5\u540e\u5c31\u9700\u8981\u8bfb\u53d6\u8d44\u6e90\u6587\u4ef6\u5185\u5bb9\u4e86\u3002"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"runSyncOrAsync"),"\u65b9\u6cd5\u662f\u6267\u884c\u8c03\u7528",(0,r.yg)("inlineCode",{parentName:"li"},"loader"),"\u51fd\u6570\u7684\u65b9\u6cd5,",(0,r.yg)("inlineCode",{parentName:"li"},"loader"),"\u7684\u6267\u884c\u6709\u4e24\u79cd\u65b9\u5f0f\u540c\u6b65/\u5f02\u6b65\uff0c\u8fd9\u91cc\u6b63\u662f\u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u8fdb\u884c\u7684\u7edf\u4e00\u5904\u7406\u3002"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"iterateNormalLoaders"),"\u65b9\u6cd5\u662f\u8fed\u4ee3",(0,r.yg)("inlineCode",{parentName:"li"},"normal loader"),"\u7684\u65b9\u6cd5")),(0,r.yg)("h5",{id:"runsyncorasync"},"runSyncOrAsync"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"/**\n *\n * \u6267\u884cloader \u540c\u6b65/\u5f02\u6b65\n * @param {*} fn \u9700\u8981\u88ab\u6267\u884c\u7684\u51fd\u6570\n * @param {*} context loader\u7684\u4e0a\u4e0b\u6587\u5bf9\u8c61\n * @param {*} args [remainingRequest,previousRequest,currentLoaderObj.data = {}]\n * @param {*} callback \u5916\u90e8\u4f20\u5165\u7684callback (runLoaders\u65b9\u6cd5\u7684\u5f62\u53c2)\n */\nfunction runSyncOrAsync(fn, context, args, callback) {\n  // \u662f\u5426\u540c\u6b65 \u9ed8\u8ba4\u540c\u6b65loader \u8868\u793a\u5f53\u524dloader\u6267\u884c\u5b8c\u81ea\u52a8\u4f9d\u6b21\u8fed\u4ee3\u6267\u884c\n  let isSync = true;\n  // \u8868\u793a\u4f20\u5165\u7684fn\u662f\u5426\u5df2\u7ecf\u6267\u884c\u8fc7\u4e86 \u7528\u6765\u6807\u8bb0\u91cd\u590d\u6267\u884c\n  let isDone = false;\n\n  // \u5b9a\u4e49 this.callback\n  // \u540c\u65f6this.async \u901a\u8fc7\u95ed\u5305\u8bbf\u95ee\u8c03\u7528innerCallback \u8868\u793a\u5f02\u6b65loader\u6267\u884c\u5b8c\u6bd5\n  const innerCallback = (context.callback = function () {\n    isDone = true;\n    // \u5f53\u8c03\u7528this.callback\u65f6 \u6807\u8bb0\u4e0d\u8d70loader\u51fd\u6570\u7684return\u4e86\n    isSync = false;\n    callback(null, ...arguments);\n  });\n\n  // \u5b9a\u4e49\u5f02\u6b65 this.async\n  // \u6bcf\u6b21loader\u8c03\u7528\u90fd\u4f1a\u6267\u884crunSyncOrAsync\u90fd\u4f1a\u91cd\u65b0\u5b9a\u4e49\u4e00\u4e2acontext.async\u65b9\u6cd5\n  context.async = function () {\n    isSync = false; // \u5c06\u672c\u6b21\u540c\u6b65\u53d8\u66f4\u6210\u4e3a\u5f02\u6b65\n    return innerCallback;\n  };\n\n  // \u8c03\u7528pitch-loader\u6267\u884c \u5c06this\u4f20\u9012\u6210\u4e3aloaderContext \u540c\u65f6\u4f20\u9012\u4e09\u4e2a\u53c2\u6570\n  // \u8fd4\u56depitch\u51fd\u6570\u7684\u8fd4\u56de\u503c \u7504\u522b\u662f\u5426\u8fdb\u884c\u7194\u65ad\n  const result = fn.apply(context, args);\n\n  if (isSync) {\n    isDone = true;\n    if (result === undefined) {\n      return callback();\n    }\n    // \u5982\u679c loader\u8fd4\u56de\u7684\u662f\u4e00\u4e2aPromise \u5f02\u6b65loader\n    if (\n      result &&\n      typeof result === 'object' &&\n      typeof result.then === 'function'\n    ) {\n      // \u540c\u6837\u7b49\u5f85Promise\u7ed3\u675f\u540e\u76f4\u63a5\u7194\u65ad \u5426\u5219Reject \u76f4\u63a5callback\u9519\u8bef\n      return result.then((r) => callback(null, r), callback);\n    }\n    // \u975ePromise \u5374\u5b58\u5728\u6267\u884c\u7ed3\u679c \u8fdb\u884c\u7194\u65ad\n    return callback(null, result);\n  }\n}\n")),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"runSyncOrAsync"),"\u63a5\u53d7\u56db\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u662f"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"fn"),"\u9700\u8981\u88ab\u8c03\u7528\u7684\u51fd\u6570"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"context")," \u88ab\u8c03\u7528\u7684",(0,r.yg)("inlineCode",{parentName:"li"},"fn"),"\u51fd\u6570\u5185\u90e8\u7684",(0,r.yg)("inlineCode",{parentName:"li"},"this"),"\u6307\u9488"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"args")," \u88ab\u8c03\u7528\u51fd\u6570\u7684",(0,r.yg)("inlineCode",{parentName:"li"},"fn"),"\u4f20\u5165\u7684\u53c2\u6570"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"callback")," \u7528\u6765\u8868\u793a",(0,r.yg)("inlineCode",{parentName:"li"},"loader(fn)"),"\u6267\u884c\u5b8c\u6bd5\u540e\u8c03\u7528\u7684\u56de\u8c03\u51fd\u6570\u3002")),(0,r.yg)("p",null,"\u901a\u8fc7\u95ed\u5305\u7ed3\u5408",(0,r.yg)("inlineCode",{parentName:"p"},"isSync"),"\u53d8\u91cf\u5b9e\u73b0\u5f02\u6b65",(0,r.yg)("inlineCode",{parentName:"p"},"this.async/this.callback"),"\u8fd9\u4e24\u4e2a",(0,r.yg)("inlineCode",{parentName:"p"},"loader API"),"\u7684\u5b9e\u73b0\u3002"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"\u6700\u7ec8\uff0c",(0,r.yg)("inlineCode",{parentName:"strong"},"loader"),"\u6267\u884c\u5b8c\u6bd5",(0,r.yg)("inlineCode",{parentName:"strong"},"runSyncOrAsync"),"\u65b9\u6cd5\u4f1a\u5c06",(0,r.yg)("inlineCode",{parentName:"strong"},"loader"),"\u6267\u884c\u5b8c\u6bd5\u7684\u8fd4\u56de\u503c\u4f20\u9012\u7ed9",(0,r.yg)("inlineCode",{parentName:"strong"},"callback"),"\u51fd\u6570\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u3002")),(0,r.yg)("p",null,"\u5728",(0,r.yg)("inlineCode",{parentName:"p"},"iteratePitchingLoaders"),"\u51fd\u6570\u4e2d\u901a\u8fc7",(0,r.yg)("inlineCode",{parentName:"p"},"runSyncOrAsync"),"\u53bb\u6267\u884c\u5bf9\u5e94",(0,r.yg)("inlineCode",{parentName:"p"},"pitch loader"),"\uff0c\u5206\u522b\u4f20\u5165\u4e86\u8fd9\u56db\u4e2a\u53c2\u6570\uff1a"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"pitchFunction"),"\u4f5c\u4e3a\u9700\u8981\u6267\u884c\u7684",(0,r.yg)("inlineCode",{parentName:"li"},"fn"),"\u3002"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"loaderContext"),"\u8868\u793a",(0,r.yg)("inlineCode",{parentName:"li"},"pitch loader"),"\u51fd\u6570\u4e2d\u7684",(0,r.yg)("inlineCode",{parentName:"li"},"this"),"\u4e0a\u4e0b\u6587\u5bf9\u8c61\u3002"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"[currentLoaderObject.remainingRequest,currentLoaderObject.previousRequest,currentLoaderObject.data]"),"\u3002",(0,r.yg)("inlineCode",{parentName:"li"},"pitch loader"),"\u51fd\u6570\u4f1a\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\u5206\u522b\u662f\u5269\u4e0b\u7684",(0,r.yg)("inlineCode",{parentName:"li"},"laoder"),"\u8bf7\u6c42, \u5df2\u7ecf\u5904\u7406\u8fc7\u7684",(0,r.yg)("inlineCode",{parentName:"li"},"loader"),"\u8bf7\u6c42\u4ee5\u53ca\u4f5c\u4e3a\u4f20\u9012\u7ed9",(0,r.yg)("inlineCode",{parentName:"li"},"normal"),"\u9636\u6bb5\u7684",(0,r.yg)("inlineCode",{parentName:"li"},"data"),"\u3002"),(0,r.yg)("li",{parentName:"ul"},"\u7b2c\u56db\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c",(0,r.yg)("strong",{parentName:"li"},"\u5b83\u8868\u793a",(0,r.yg)("inlineCode",{parentName:"strong"},"pitch loader"),"\u51fd\u6570\u6267\u884c\u5b8c\u6bd5\u540e\u8fd9\u4e2a",(0,r.yg)("inlineCode",{parentName:"strong"},"callback"),"\u4f1a\u88ab\u8c03\u7528\uff0c\u5982\u679c",(0,r.yg)("inlineCode",{parentName:"strong"},"pitch loader"),"\u5b58\u5728\u8fd4\u56de\u503c\u90a3\u4e48\u5b83\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u5219\u4f1a\u63a5\u53d7\u5230",(0,r.yg)("inlineCode",{parentName:"strong"},"pitch loader"),"\u6267\u884c\u540e\u7684\u8fd4\u56de\u503c\u3002"))),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"iteratePitchingLoaders"),"\u4e2d\u8c03\u7528",(0,r.yg)("inlineCode",{parentName:"p"},"runSyncOrAsync"),"\u6267\u884c",(0,r.yg)("inlineCode",{parentName:"p"},"loader"),"\u65f6\u5019",(0,r.yg)("strong",{parentName:"p"},"\u4f20\u5165\u7684\u7b2c\u56db\u4e2a",(0,r.yg)("inlineCode",{parentName:"strong"},"callback"),"\u51fd\u6570\uff1a")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"runSyncOrAsync(\n  pitchFunction,\n  loaderContext,\n  [\n    currentLoaderObject.remainingRequest,\n    currentLoaderObject.previousRequest,\n    currentLoaderObject.data,\n  ],\n  function (err, ...args) {\n    if (err) {\n      // \u5b58\u5728\u9519\u8bef\u76f4\u63a5\u8c03\u7528callback \u8868\u793arunLoaders\u6267\u884c\u5b8c\u6bd5\n      return callback(err);\n    }\n    // \u6839\u636e\u8fd4\u56de\u503c \u5224\u65ad\u662f\u5426\u9700\u8981\u7194\u65ad or \u7ee7\u7eed\u5f80\u4e0b\u6267\u884c\u4e0b\u4e00\u4e2apitch\n    // pitch\u51fd\u6570\u5b58\u5728\u8fd4\u56de\u503c -> \u8fdb\u884c\u7194\u65ad \u6389\u5934\u6267\u884cnormal-loader\n    // pitch\u51fd\u6570\u4e0d\u5b58\u5728\u8fd4\u56de\u503c -> \u7ee7\u7eed\u8fed\u4ee3\u4e0b\u4e00\u4e2a iteratePitchLoader\n    const hasArg = args.some((i) => i !== undefined);\n    if (hasArg) {\n      loaderContext.loaderIndex--;\n      // \u7194\u65ad \u76f4\u63a5\u8fd4\u56de\u8c03\u7528normal-loader\n      iterateNormalLoaders(options, loaderContext, args, callback);\n    } else {\n      // \u8fd9\u4e2apitch-loader\u6267\u884c\u5b8c\u6bd5\u540e \u7ee7\u7eed\u8c03\u7528\u4e0b\u4e00\u4e2aloader\n      iteratePitchingLoaders(options, loaderContext, callback);\n    }\n  }\n);\n")),(0,r.yg)("p",null,"\u5982\u679c\u5b58\u5728\u9519\u8bef\uff0c\u90a3\u4e48\u76f4\u63a5\u8c03\u7528",(0,r.yg)("inlineCode",{parentName:"p"},"runLoaders"),"\u4f20\u5165\u7684",(0,r.yg)("inlineCode",{parentName:"p"},"callback(err)"),"\u3002"),(0,r.yg)("p",null,"\u5982\u679c\u4e0d\u5b58\u5728\u9519\u8bef\uff0c\u5bf9\u4e8e",(0,r.yg)("strong",{parentName:"p"},"\u9664\u5f00\u7b2c\u4e00\u4e2a\u8868\u793a\u9519\u8bef\u7684\u53c2\u6570\u5269\u4f59\u53c2\u6570\u505a\u4e86\u5224\u65ad")),(0,r.yg)("p",null,(0,r.yg)("img",{parentName:"p",src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4df62ce00b9745fab4dee2dc098ddb09~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp?",alt:null})),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"\u4efb\u4f55\u4e00\u4e2a",(0,r.yg)("inlineCode",{parentName:"strong"},"loader"),"\u7684",(0,r.yg)("inlineCode",{parentName:"strong"},"pitch"),"\u9636\u6bb5\u5982\u4f55\u8fd4\u56de\u4e86\u975e",(0,r.yg)("inlineCode",{parentName:"strong"},"undefined"),"\u7684\u4efb\u4f55\u503c\uff0c\u90a3\u4e48\u6b64\u65f6",(0,r.yg)("inlineCode",{parentName:"strong"},"loader"),"\u5c06\u4f1a\u53d1\u751f\u7194\u65ad\u7684\u6548\u679c\uff1a\u7acb\u5373\u6389\u5934\u6267\u884c",(0,r.yg)("inlineCode",{parentName:"strong"},"normal loader"),"\u5e76\u4e14\u5c06",(0,r.yg)("inlineCode",{parentName:"strong"},"pitch"),"\u9636\u6bb5\u7684\u8fd4\u56de\u503c\u4f20\u9012\u7ed9",(0,r.yg)("inlineCode",{parentName:"strong"},"normal loader"),"\u3002")),(0,r.yg)("p",null,"\u6240\u4ee5\u8fd9\u91cc\u901a\u8fc7",(0,r.yg)("inlineCode",{parentName:"p"},"callback"),"\u4e2d\u5224\u65ad\uff0c\u5982\u679c",(0,r.yg)("inlineCode",{parentName:"p"},"args"),"\u4e2d\u5b58\u5728\u4efb\u4f55\u4e00\u4e2a\u975e",(0,r.yg)("inlineCode",{parentName:"p"},"undefined"),"\u7684\u8fd4\u56de\u503c\u3002\u90a3\u4e48\u6b64\u65f6\u5c06",(0,r.yg)("inlineCode",{parentName:"p"},"loaderContext.loaderIndex"),"\u9012\u51cf\uff0c\u4ece\u800c\u5f00\u59cb\u8fed\u4ee3",(0,r.yg)("inlineCode",{parentName:"p"},"normal loader"),"\u3002"),(0,r.yg)("p",null,"\u5982\u679c",(0,r.yg)("inlineCode",{parentName:"p"},"pitch loader"),"\u8fd0\u884c\u7ed3\u675f\u540e\u4e0d\u5b58\u5728\u8fd4\u56de\u503c\u6216\u8005\u8bf4\u8fd4\u56de\u7684\u662f",(0,r.yg)("inlineCode",{parentName:"p"},"undefeind"),"\uff0c\u90a3\u4e48\u6b64\u65f6\u7ee7\u7eed\u9012\u5f52\u8c03\u7528\u4e0b\u4e00\u4e2a",(0,r.yg)("inlineCode",{parentName:"p"},"pitch loader"),"\u3002"),(0,r.yg)("h5",{id:"processresource"},"processResource"),(0,r.yg)("p",null,"\u7ed3\u675f\u4e86",(0,r.yg)("inlineCode",{parentName:"p"},"iteratePitchingLoaders"),"\u4e4b\u540e\uff0c\u63a5\u7740\u5c31\u662f",(0,r.yg)("strong",{parentName:"p"},"\u8bfb\u53d6\u8d44\u6e90\u6587\u4ef6\u5185\u5bb9\u4e86"),"\uff1a"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"\u6309\u7167\u4f20\u5165\u7684\u65b9\u6cd5\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\uff0c\u540c\u65f6\u5c06\u5f97\u5230\u7684\u6587\u4ef6",(0,r.yg)("inlineCode",{parentName:"li"},"Buffer"),"\u7c7b\u578b\u7684\u5185\u5bb9\u4fdd\u5b58\u8fdb\u5165",(0,r.yg)("inlineCode",{parentName:"li"},"processOptions.resourceBuffer"),"\u4e2d\u53bb\u3002"),(0,r.yg)("li",{parentName:"ul"},"\u62ff\u5230\u6587\u4ef6\u5185\u5bb9\u540e\uff0c\u5c06\u6587\u4ef6\u5185\u5bb9\u4f20\u5165",(0,r.yg)("inlineCode",{parentName:"li"},"normal loader"),"\u4e4b\u540e\u6267\u884c",(0,r.yg)("inlineCode",{parentName:"li"},"iterateNormalLoaders"),"\u8fed\u4ee3\u6267\u884c",(0,r.yg)("inlineCode",{parentName:"li"},"normal loader"),"\u3002")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"/**\n *\n * \u8bfb\u53d6\u6587\u4ef6\u65b9\u6cd5\n * @param {*} options\n * @param {*} loaderContext\n * @param {*} callback\n */\nfunction processResource(options, loaderContext, callback) {\n  // \u91cd\u7f6e\u8d8a\u754c\u7684 loaderContext.loaderIndex\n  // \u8fbe\u5230\u5012\u53d9\u6267\u884c pre -> normal -> inline -> post\n  loaderContext.loaderIndex = loaderContext.loaders.length - 1;\n  const resource = loaderContext.resourcePath;\n  // \u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\n  loaderContext.readResource(resource, (err, buffer) => {\n    if (err) {\n      return callback(err);\n    }\n    // \u4fdd\u5b58\u539f\u59cb\u6587\u4ef6\u5185\u5bb9\u7684buffer \u76f8\u5f53\u4e8eprocessOptions.resourceBuffer = buffer\n    options.resourceBuffer = buffer;\n    // \u540c\u65f6\u5c06\u8bfb\u53d6\u5230\u7684\u6587\u4ef6\u5185\u5bb9\u4f20\u5165iterateNormalLoaders \u8fdb\u884c\u8fed\u4ee3`normal loader`\n    iterateNormalLoaders(options, loaderContext, [buffer], callback);\n  });\n}\n")),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("inlineCode",{parentName:"li"},"loaderIndex"),"\u5728\u8fed\u4ee3",(0,r.yg)("inlineCode",{parentName:"li"},"pitch loader"),"\u4e2d\u8d8a\u754c\u4e86(\u4e5f\u5c31\u662f\u7b49\u4e8e",(0,r.yg)("inlineCode",{parentName:"li"},"loaderContext.loaders.length"),")\u65f6\u624d\u4f1a\u8fdb\u5165",(0,r.yg)("inlineCode",{parentName:"li"},"processResource"),"\u65b9\u6cd5\uff0c\u6240\u4ee5\u6b64\u65f6\u5c06",(0,r.yg)("inlineCode",{parentName:"li"},"loaderContext.loaderIndex"),(0,r.yg)("strong",{parentName:"li"},"\u91cd\u7f6e\u4e3a",(0,r.yg)("inlineCode",{parentName:"strong"},"loaderContext.loaders.lenth -1")),"\u3002"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("inlineCode",{parentName:"li"},"iterateNormalLoaders"),"\u989d\u5916\u4f20\u5165\u4e86\u4e00\u4e2a\u8868\u793a\u8d44\u6e90\u6587\u4ef6\u5185\u5bb9",(0,r.yg)("inlineCode",{parentName:"li"},"[buffer]"),"\u7684\u6570\u7ec4\uff0c\u56e0\u4e3a\u4f20\u9012\u7ed9",(0,r.yg)("inlineCode",{parentName:"li"},"runSyncOrAsync"),"\u65b9\u6cd5\u65f6\u7b2c\u4e09\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u6570\u7ec4(\u8868\u793a\u8c03\u7528",(0,r.yg)("inlineCode",{parentName:"li"},"loader"),"\u51fd\u6570\u65f6\u4f20\u9012\u7ed9",(0,r.yg)("inlineCode",{parentName:"li"},"loader"),"\u51fd\u6570\u7684\u53c2\u6570)\uff0c\u56e0\u4e3a\u901a\u8fc7",(0,r.yg)("inlineCode",{parentName:"li"},"apply"),"\u8fdb\u884c\u8c03\u7528\u6240\u4ee5\u7edf\u4e00\u5904\u7406\u4e3a\u6570\u7ec4"),(0,r.yg)("li",{parentName:"ol"},"\u800c\u4e00\u5f00\u59cb ",(0,r.yg)("inlineCode",{parentName:"li"},"loaders")," \u662f\u6309\u7167",(0,r.yg)("inlineCode",{parentName:"li"},"post -> inline -> normal -> pre"),"\u7684\u987a\u5e8f\u4fdd\u5b58\u7684\uff0c\u6240\u4ee5\u6b64\u65f6\u53ea\u8981\u6309\u7167",(0,r.yg)("inlineCode",{parentName:"li"},"loaderIndex"),(0,r.yg)("strong",{parentName:"li"},"\u9006\u5e8f\u53bb\u8fed\u4ee3\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230",(0,r.yg)("inlineCode",{parentName:"strong"},"normal loader"),"\u7684\u987a\u5e8f"),"\u3002")),(0,r.yg)("h5",{id:"iteratenormalloaders"},"iterateNormalLoaders"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"/**\n * \u8fed\u4ee3normal-loaders \u6839\u636eloaderIndex\u7684\u503c\u8fdb\u884c\u8fed\u4ee3\n * \u6838\u5fc3\u601d\u8def: \u8fed\u4ee3\u5b8c\u6210pitch-loader\u4e4b\u540e \u8bfb\u53d6\u6587\u4ef6 \u8fed\u4ee3\u6267\u884cnormal-loader\n *          \u6216\u8005\u5728pitch-loader\u4e2d\u5b58\u5728\u8fd4\u56de\u503c \u7194\u65ad\u6267\u884cnormal-loader\n * @param {*} options processOptions\u5bf9\u8c61\n * @param {*} loaderContext loader\u4e2d\u7684this\u5bf9\u8c61\n * @param {*} args [buffer/any]\n * \u5f53pitch\u9636\u6bb5\u4e0d\u5b58\u5728\u8fd4\u56de\u503c\u65f6 \u6b64\u65f6\u4e3a\u5373\u5c06\u5904\u7406\u7684\u8d44\u6e90\u6587\u4ef6\n * \u5f53pitch\u9636\u6bb5\u5b58\u5728\u8fd4\u56de\u503c\u65f6 \u6b64\u65f6\u4e3apitch\u9636\u6bb5\u7684\u8fd4\u56de\u503c\n * @param {*} callback runLoaders\u4e2d\u7684callback\u51fd\u6570\n */\nfunction iterateNormalLoaders(options, loaderContext, args, callback) {\n  // \u8d8a\u754c\u5143\u7d20\u5224\u65ad \u8d8a\u754c\u8868\u793a\u6240\u6709normal loader\u5904\u7406\u5b8c\u6bd5 \u76f4\u63a5\u8c03\u7528callback\u8fd4\u56de\n  if (loaderContext.loaderIndex < 0) {\n    return callback(null, args);\n  }\n  const currentLoader = loaderContext.loaders[loaderContext.loaderIndex];\n  if (currentLoader.normalExecuted) {\n    loaderContext.loaderIndex--;\n    return iterateNormalLoaders(options, loaderContext, args, callback);\n  }\n\n  const normalFunction = currentLoader.normal;\n  // \u6807\u8bb0\u4e3a\u6267\u884c\u8fc7\n  currentLoader.normalExecuted = true;\n  // \u68c0\u67e5\u662f\u5426\u6267\u884c\u8fc7\n  if (!normalFunction) {\n    return iterateNormalLoaders(options, loaderContext, args, callback);\n  }\n  // \u6839\u636eloader\u4e2draw\u7684\u503c \u683c\u5f0f\u5316source\n  convertArgs(args, currentLoader.raw);\n  // \u6267\u884cloader\n  runSyncOrAsync(normalFunction, loaderContext, args, (err, ...args) => {\n    if (err) {\n      return callback(err);\n    }\n    // \u7ee7\u7eed\u8fed\u4ee3 \u6ce8\u610f\u8fd9\u91cc\u7684args\u662f\u5904\u7406\u8fc7\u540e\u7684args\n    iterateNormalLoaders(options, loaderContext, args, callback);\n  });\n}\n")),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"iteratePitchingLoaders"),"\u4ec5\u4ec5\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\uff0c",(0,r.yg)("inlineCode",{parentName:"p"},"iterateNormalLoaders"),"\u989d\u5916\u63a5\u53d7\u4e00\u4e2a",(0,r.yg)("inlineCode",{parentName:"p"},"args"),"\u53c2\u6570\u8868\u793a\u8d44\u6e90\u6587\u4ef6\u5bf9\u8c61\u7684",(0,r.yg)("inlineCode",{parentName:"p"},"[Buffer]"),"\uff08\u6216\u8005\u53d1\u751f\u7194\u65ad\u65f6",(0,r.yg)("inlineCode",{parentName:"p"},"pitch loader"),"\u7684\u8fd4\u56de\u503c\uff09\u3002\u8fd9\u662f\u7531\u4e8e",(0,r.yg)("inlineCode",{parentName:"p"},"pitch loader"),"\u88ab\u8c03\u7528\u65f6\u7684\u53c2\u6570\u53ef\u4ee5\u901a\u8fc7",(0,r.yg)("inlineCode",{parentName:"p"},"loaderContext"),"\u6765\u83b7\u53d6(",(0,r.yg)("inlineCode",{parentName:"p"},"remainingRequest"),"\u5c5e\u6027\u7b49)\uff0c\u800c",(0,r.yg)("inlineCode",{parentName:"p"},"normal loader"),"\u7684\u53c2\u6570\u9700\u8981\u4e00\u5c42\u4e00\u5c42\u5c06\u5904\u7406\u540e\u7684\u5185\u5bb9\u4f20\u9012\u4e0b\u53bb\u3002"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"/**\n *\n * \u8f6c\u5316\u8d44\u6e90source\u7684\u683c\u5f0f\n * @param {*} args [\u8d44\u6e90]\n * @param {*} raw Boolean \u662f\u5426\u9700\u8981Buffer\n * raw\u4e3atrue \u8868\u793a\u9700\u8981\u4e00\u4e2aBuffer\n * raw\u4e3afalse\u8868\u793a\u4e0d\u9700\u8981Buffer\n */\nfunction convertArgs(args, raw) {\n  if (!raw && Buffer.isBuffer(args[0])) {\n    // \u6211\u4e0d\u9700\u8981buffer\n    args[0] = args[0].toString();\n  } else if (raw && typeof args[0] === 'string') {\n    // \u9700\u8981Buffer \u8d44\u6e90\u6587\u4ef6\u662fstring\u7c7b\u578b \u8f6c\u5316\u79f0\u4e3aBuffer\n    args[0] = Buffer.from(args[0], 'utf8');\n  }\n}\n")),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"convertArgs"),"\u65b9\u6cd5",(0,r.yg)("strong",{parentName:"p"},"\u6839\u636e",(0,r.yg)("inlineCode",{parentName:"strong"},"loader"),"\u7684",(0,r.yg)("inlineCode",{parentName:"strong"},"raw"),"\u5c5e\u6027\u5224\u65ad\u8fd9\u4e2a",(0,r.yg)("inlineCode",{parentName:"strong"},"loader"),"\u5728",(0,r.yg)("inlineCode",{parentName:"strong"},"normal"),"\u9636\u6bb5\u9700\u8981\u63a5\u53d7\u8d44\u6e90\u6587\u4ef6\u5185\u5bb9\u662f",(0,r.yg)("inlineCode",{parentName:"strong"},"Buffer"),"\u8fd8\u662f",(0,r.yg)("inlineCode",{parentName:"strong"},"String")),"\u3002"),(0,r.yg)("h4",{id:"loader-context"},(0,r.yg)("strong",{parentName:"h4"},"Loader context")),(0,r.yg)("p",null,"Loader\u5b58\u5728\u8fd0\u884c\u4e0a\u4e0b\u6587\uff0c\u53ef\u4ee5\u901a\u8fc7this\u53bb\u8bbf\u95ee\u4e00\u4e9b\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u4ee5\u4e0b\u5217\u4e3e\u5e38\u7528\u7684\u90e8\u5206\uff08\u622a\u81f3webpack v5.24.2\uff09"),(0,r.yg)("h5",{id:"thisgetoptions"},"this.getOptions"),(0,r.yg)("p",null,"\u83b7\u53d6\u914d\u7f6e\u6587\u4ef6\u4e2d\u4f20\u7ed9\u8be5loader\u7684options\u3002"),(0,r.yg)("h5",{id:"thiscallback"},"this.callback"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"this.callback(\n  err: Error | null,\n  content: string | Buffer,\n  sourceMap?: SourceMap,\n  meta?: any\n);\n")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"sourceMap: \u8fd4\u56de\u672c\u6b21\u8f6c\u6362\u4e2d\u751f\u6210\u7684source map\u3002"),(0,r.yg)("li",{parentName:"ul"},"meta: \u672c\u6b21\u8f6c\u6362\u4e2d\u751f\u6210\u7684\u989d\u5916\u4fe1\u606f\uff0c\u53ef\u81ea\u5b9a\u4e49\u3002\u4f8b\u5982\u672c\u6b21\u8f6c\u6362\u4e3a\u6e90\u6587\u4ef6\u751f\u6210\u4e86AST\uff0c\u5219\u53ef\u5c06\u8be5AST\u4f20\u7ed9\u540e\u9762\u7684loader\uff0c\u4ee5\u514d\u9700\u8981AST\u7684loader\u53bb\u91cd\u590d\u751f\u6210\u800c\u964d\u4f4e\u6027\u80fd\u3002")),(0,r.yg)("h5",{id:"thisasync"},"this.async"),(0,r.yg)("p",null,"\u544a\u8bc9loader-runner\u8fd9\u4e2aloader\u5c06\u4f1a\u5f02\u6b65\u5730\u56de\u8c03\u3002\u8fd4\u56dethis.callback"),(0,r.yg)("h5",{id:"thisrequest"},"this.request"),(0,r.yg)("p",null,"\u88ab\u89e3\u6790\u51fa\u6765\u7684 request \u5b57\u7b26\u4e32\uff0c\u7c7b\u4f3cInline loader\u7684\u8c03\u7528\uff0c\u5982\uff1a"),(0,r.yg)("p",null,'"/abc/loader1.js?xyz!/abc/node_modules/loader2/index.js!/abc/resource.js?rrr"'),(0,r.yg)("h5",{id:"thisloaders"},"this.loaders"),(0,r.yg)("p",null,"Loader\u7684\u8c03\u7528\u94fe\u6570\u7ec4"),(0,r.yg)("h5",{id:"thisadddependency"},"this.addDependency"),(0,r.yg)("p",null,"\u6dfb\u52a0\u4e00\u4e2a\u6587\u4ef6\u4f5c\u4e3aloader\u7684\u4f9d\u8d56\uff0c\u82e5loader\u5f00\u542f\u4e86\u7f13\u5b58\uff0c\u8be5\u6587\u4ef6\u53d8\u5316\u65f6\u4f1a\u4f7f\u7f13\u5b58\u5931\u6548\u5e76\u91cd\u65b0\u8c03\u7528loader\u3002"),(0,r.yg)("p",null,"\u4f8b\u5982\uff0csass-loader\u548cless-loader\u5c31\u4f7f\u7528\u4e86\u8fd9\u65b9\u6cd5\uff0c\u5f53\u5b83\u53d1\u73b0\u5bfc\u5165\u7684css\u6587\u4ef6\u53d1\u751f\u53d8\u5316\u65f6\u5c31\u4f1a\u91cd\u65b0\u7f16\u8bd1\u3002"),(0,r.yg)("h5",{id:"thisaddcontextdependency"},"this.addContextDependency"),(0,r.yg)("p",null,"\u6dfb\u52a0\u4e00\u4e2a\u76ee\u5f55\u4f5c\u4e3aloader\u7684\u4f9d\u8d56\u3002"),(0,r.yg)("h5",{id:"thissourcemap"},"this.sourceMap"),(0,r.yg)("p",null,"\u53ef\u901a\u8fc7",(0,r.yg)("inlineCode",{parentName:"p"},"this.sourceMap()"),"\u83b7\u53d6\u914d\u7f6e\u4e2d\u662f\u5426\u8981\u6c42\u751f\u6210source map\u3002"),(0,r.yg)("h5",{id:"thisemitfile"},"this.emitFile"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"emitFile(name: string, content: Buffer|string, sourceMap: {...})\n")),(0,r.yg)("p",null,"\u8f93\u51fa\u4e00\u4e2a\u6587\u4ef6\u3002"),(0,r.yg)("h3",{id:"plugin"},"plugin"),(0,r.yg)("p",null,"\u5982\u4e0b\u56fe\u84dd\u8272\u865a\u7ebf\u7bad\u5934\u6240\u793a\uff0cwebpack\u4f1a\u5728\u5404\u4e2a\u751f\u547d\u5468\u671f\u4e2d\u5e7f\u64ad\u4e8b\u4ef6\uff0c\u5e76\u89e6\u53d1\u5bf9\u5e94\u7684\u63d2\u4ef6\uff1a"),(0,r.yg)("p",null,(0,r.yg)("img",{parentName:"p",src:"https://pic4.zhimg.com/80/v2-1f8883e4e8ca6e681628ec655670249b_1440w.jpg",alt:null})),(0,r.yg)("h4",{id:"\u4ec0\u4e48\u662fplugin"},"\u4ec0\u4e48\u662fplugin"),(0,r.yg)("p",null,"Plugin\u662fwebpack\u8fd0\u884c\u751f\u547d\u5468\u671f\u7684\u5404\u4e2a\u9636\u6bb5\u4e0a\u6302\u8f7d\u7684\u4e8b\u4ef6\uff0c\u4f1a\u88ab\u6307\u5b9a\u7684\u65f6\u95f4\u8282\u70b9\u88ab\u89e6\u53d1\uff08\u76f8\u5f53\u4e8e\u8ba2\u9605/\u53d1\u5e03\u6a21\u5f0f\uff09\uff0c\u80fd\u591f\u6539\u53d8\u6784\u5efa\u7ed3\u679c\u3001\u62c6\u5206\u548c\u4f18\u5316bundle\u7b49\uff0c\u672c\u8d28\u4e0a\u5c31\u662f\u64cd\u4f5c",(0,r.yg)("inlineCode",{parentName:"p"},"compiler"),"\u5bf9\u8c61\u4ece\u800c\u5f71\u54cd\u6253\u5305\u7ed3\u679c\u3002"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"webpack"),"\u63d2\u4ef6",(0,r.yg)("strong",{parentName:"p"},"\u672c\u8d28\u4e0a\u5c31\u662f\u901a\u8fc7\u53d1\u5e03\u8ba2\u9605\u7684\u6a21\u5f0f\uff0c\u901a\u8fc7",(0,r.yg)("inlineCode",{parentName:"strong"},"compiler"),"\u4e0a\u76d1\u542c\u4e8b\u4ef6\u3002\u7136\u540e\u5728\u6253\u5305\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u89e6\u53d1\u76d1\u542c\u7684\u4e8b\u4ef6\u4ece\u800c\u6dfb\u52a0\u4e00\u5b9a\u7684\u903b\u8f91\u5f71\u54cd\u6253\u5305\u7ed3\u679c")),(0,r.yg)("h3",{id:"webpack\u914d\u7f6e\u9759\u6001\u8d44\u6e90\u652f\u6301"},(0,r.yg)("inlineCode",{parentName:"h3"},"webpack"),"\u914d\u7f6e\u9759\u6001\u8d44\u6e90\u652f\u6301"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"asset/resource")," \u53d1\u9001\u4e00\u4e2a\u5355\u72ec\u7684\u6587\u4ef6\u5e76\u5bfc\u51fa URL\u3002\u4e4b\u524d\u901a\u8fc7\u4f7f\u7528 ",(0,r.yg)("inlineCode",{parentName:"li"},"file-loader")," \u5b9e\u73b0\u3002"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"asset/inline")," \u5bfc\u51fa\u4e00\u4e2a\u8d44\u6e90\u7684 data URI\u3002\u4e4b\u524d\u901a\u8fc7\u4f7f\u7528 ",(0,r.yg)("inlineCode",{parentName:"li"},"url-loader")," \u5b9e\u73b0\u3002"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"asset/source")," \u5bfc\u51fa\u8d44\u6e90\u7684\u6e90\u4ee3\u7801\u3002\u4e4b\u524d\u901a\u8fc7\u4f7f\u7528 ",(0,r.yg)("inlineCode",{parentName:"li"},"raw-loader")," \u5b9e\u73b0\u3002"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"asset")," \u5728\u5bfc\u51fa\u4e00\u4e2a data URI \u548c\u53d1\u9001\u4e00\u4e2a\u5355\u72ec\u7684\u6587\u4ef6\u4e4b\u95f4\u81ea\u52a8\u9009\u62e9\u3002\u4e4b\u524d\u901a\u8fc7\u4f7f\u7528 ",(0,r.yg)("inlineCode",{parentName:"li"},"url-loader"),"\uff0c\u5e76\u4e14\u914d\u7f6e\u8d44\u6e90\u4f53\u79ef\u9650\u5236\u5b9e\u73b0\u3002")),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"\u5173\u4e8e\u914d\u7f6e",(0,r.yg)("inlineCode",{parentName:"p"},"type:'asset'"),"\u540e\uff0cwebpack \u5c06\u6309\u7167\u9ed8\u8ba4\u6761\u4ef6\uff0c\u81ea\u52a8\u5730\u5728 ",(0,r.yg)("inlineCode",{parentName:"p"},"resource")," \u548c ",(0,r.yg)("inlineCode",{parentName:"p"},"inline")," \u4e4b\u95f4\u8fdb\u884c\u9009\u62e9\uff1a\u5c0f\u4e8e 8kb \u7684\u6587\u4ef6\uff0c\u5c06\u4f1a\u89c6\u4e3a ",(0,r.yg)("inlineCode",{parentName:"p"},"inline")," \u6a21\u5757\u7c7b\u578b\uff0c\u5426\u5219\u4f1a\u88ab\u89c6\u4e3a ",(0,r.yg)("inlineCode",{parentName:"p"},"resource")," \u6a21\u5757\u7c7b\u578b\u3002")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n  ...\n  module: {\n    rules: [\n      {\n        test: /\\.(png|jpe?g|svg|gif)$/,\n        type:'asset/inline'\n      },\n      {\n        test: /\\.(eot|ttf|woff|woff2)$/,\n        type: 'asset/resource',\n        generator: {\n          filename: 'fonts/[hash][ext][query]',\n        },\n      },\n    ],\n  },\n};\n")),(0,r.yg)("p",null,"\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e ",(0,r.yg)("a",{parentName:"p",href:"https://webpack.docschina.org/configuration/module/#ruleparserdataurlcondition"},(0,r.yg)("inlineCode",{parentName:"a"},"Rule.parser.dataUrlCondition.maxSize"))," \u9009\u9879\u6765\u4fee\u6539\u6b64\u6761\u4ef6"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"maxSize"),"\u5c31\u76f8\u5f53\u4e8e",(0,r.yg)("inlineCode",{parentName:"p"},"url-loader"),"\u4e2d\u7684",(0,r.yg)("inlineCode",{parentName:"p"},"limit"),"\u5c5e\u6027\uff0c\u8d44\u6e90\u5927\u5c0f\u5728",(0,r.yg)("inlineCode",{parentName:"p"},"maxSize"),"\u4e4b\u5185\u4f7f\u7528\u884c\u5185",(0,r.yg)("inlineCode",{parentName:"p"},"asset/inline"),"\u5904\u7406\uff0c\u8d85\u8fc7\u4e4b\u540e\u5c31\u4f7f\u7528",(0,r.yg)("inlineCode",{parentName:"p"},"resource"),"\u5bfc\u51fa\u8d44\u6e90"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n  //...\n  module: {\n    rules: [\n      {\n        //...\n        parser: {\n          dataUrlCondition: {\n            maxSize: 4 * 1024,\n          },\n        },\n      },\n    ],\n  },\n};\n")),(0,r.yg)("p",null,"\u5f53\u63d0\u4f9b\u51fd\u6570\u65f6\uff0c\u8fd4\u56de ",(0,r.yg)("inlineCode",{parentName:"p"},"true")," \u503c\u65f6\u544a\u77e5 webpack \u5c06\u6a21\u5757\u4f5c\u4e3a\u4e00\u4e2a Base64 \u7f16\u7801\u7684\u5b57\u7b26\u4e32\u6ce8\u5165\u5230\u5305\u4e2d\uff0c \u5426\u5219\u6a21\u5757\u6587\u4ef6\u4f1a\u88ab\u751f\u6210\u5230\u8f93\u51fa\u7684\u76ee\u6807\u76ee\u5f55\u4e2d\u3002"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"webpack.config.js")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n  //...\n  module: {\n    rules: [\n      {\n        //...\n        parser: {\n          dataUrlCondition: (source, { filename, module }) => {\n            const content = source.toString();\n            return content.includes('some marker');\n          },\n        },\n      },\n    ],\n  },\n};\n")),(0,r.yg)("h3",{id:"\u522b\u540d\u7edf\u4e00\u6269\u5c55\u540d"},"\u522b\u540d\u7edf\u4e00\u3001\u6269\u5c55\u540d"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n  resolve: {\n    alias: {\n      '@src': path.resolve(__dirname, '../src'),\n      '@packages': path.resolve(__dirname, '../src/packages'),\n      '@containers': path.resolve(__dirname, '../src/containers'),\n    },\n    // \u89e3\u6790\u6587\u4ef6\u5939\u8def\u5f84\n    mainFiles: ['index', 'main'],\n    // \u4e0d\u4e66\u5199\u6587\u4ef6\u540e\u7f00\u65f6\uff0c\u9ed8\u8ba4\u7684\u89e3\u6790\u89c4\u5219extensions\u89c4\u5219\n    extensions: ['.ts', '.tsx', '.scss', 'json', '.js'],\n  },\n};\n")),(0,r.yg)("h3",{id:"\u5e38\u89c1loader"},"\u5e38\u89c1loader"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"sass-loader / less-loader")),(0,r.yg)("p",null," \u5c06 ",(0,r.yg)("inlineCode",{parentName:"p"},"sass / less"),"\u7f16\u8bd1\u6210\u4e3a",(0,r.yg)("inlineCode",{parentName:"p"},"css")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},(0,r.yg)("a",{parentName:"strong",href:"https://link.zhihu.com/?target=http%3A//lesscss.cn/"},"Less")),"\u662fCSS\u9884\u5904\u7406\u8bed\u8a00\uff0c\u6269\u5c55\u4e86CSS\u8bed\u8a00\uff0c\u589e\u52a0\u4e86\u53d8\u91cf\u3001Mixin\u3001\u51fd\u6570\u7b49\u7279\u6027\uff0cLess-loader\u7684\u4f5c\u7528\u5c31\u662f\u5c06less\u4ee3\u7801\u8f6c\u8bd1\u4e3a\u6d4f\u89c8\u5668\u53ef\u4ee5\u8bc6\u522b\u7684CSS\u4ee3\u7801\u3002"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-less"},"// demo.less\n@base: #f938ab;\n\n.box-shadow(@style, @c) when (iscolor(@c)) {\n  -webkit-box-shadow: @style @c;\n  box-shadow:         @style @c;\n}\n.box-shadow(@style, @alpha: 50%) when (isnumber(@alpha)) {\n  .box-shadow(@style, rgba(0, 0, 0, @alpha));\n}\n.box {\n  color: saturate(@base, 5%);\n  border-color: lighten(@base, 30%);\n  div { .box-shadow(0 0 5px, 30%) }\n}\n")),(0,r.yg)("p",null,"\u4e0a\u9762\u7684less\u4ee3\u7801\u4f1a\u88abless-loader\u8f6c\u8bd1\u4e3a\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-css"},"// demo.css\n.box {\n  color: #fe33ac;\n  border-color: #fdcdea;\n}\n.box div {\n  -webkit-box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);\n}\n")),(0,r.yg)("p",null,"\u6240\u4ee5less-loader\u7684\u539f\u7406\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u8c03\u7528less\u5e93\u63d0\u4f9b\u7684\u65b9\u6cd5\uff0c\u8f6c\u8bd1less\u8bed\u6cd5\u540e\u8f93\u51fa\uff0c\u5982\u4e0b\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"// less-loader\u5b9e\u73b0\uff08\u7ecf\u7b80\u5316\uff09\nconst less = require('less');\n\nmodule.exports = function(content) {\n  const callback = this.async(); // \u8f6c\u8bd1\u6bd4\u8f83\u8017\u65f6\uff0c\u91c7\u7528\u5f02\u6b65\u65b9\u5f0f\n  const options = this.getOptions(); // \u83b7\u53d6\u914d\u7f6e\u6587\u4ef6\u4e2dless-loader\u7684options\n  \n  less.render(\n    content,\n    createOptions(options), // less\u8f6c\u8bd1\u7684\u914d\u7f6e\n    (err, output) => {\n      callback(err, output.css); // \u5c06\u751f\u6210\u7684css\u4ee3\u7801\u4f20\u9012\u7ed9\u4e0b\u4e00\u4e2aloader\n    }\n  );\n};\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"postcss-loader")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"// postcss.config.js\nmodule.exports = {\n  plugins: [\n    require('autoprefixer'),\n    require('cssnano')({\n      preset: 'default',\n    }),\n  ],\n}\n")),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"autoprefixer"),"\u63d2\u4ef6\u7684\u4f5c\u7528\u662f\u4e3a",(0,r.yg)("inlineCode",{parentName:"p"},"css"),"\u5185\u5bb9",(0,r.yg)("strong",{parentName:"p"},"\u6dfb\u52a0\u6d4f\u89c8\u5668\u5382\u5546\u524d\u7f00"),"\u517c\u5bb9\u3002"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"cssnano"),"\u7684\u4f5c\u7528\u662f\u5c3d\u53ef\u80fd\u5c0f\u7684",(0,r.yg)("strong",{parentName:"p"},"\u538b\u7f29css\u4ee3\u7801"),"\u3002"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"css-loader")),(0,r.yg)("p",null,"\u89e3\u6790css\u6587\u4ef6\u4e2d\u7684@import\u548curl\u8bed\u53e5\uff0c\u5904\u7406css-modules\uff0c\u5e76\u5c06\u7ed3\u679c\u4f5c\u4e3a\u4e00\u4e2ajs\u6a21\u5757\u8fd4\u56de"),(0,r.yg)("p",null,"\u5047\u5982\u6709a.css\u3001b.css\u3001c.css\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-css"},"// a.css\n@import './b.css'; // \u5bfc\u5165b.css\n\n.a {\n  font-size: 16px;\n}\n\n// b.css\n@import './c.css'; // \u5bfc\u5165c.css\n\n.b {\n  color: red;\n}\n\n// c.css\n.c {\n  font-weight: bolder;\n}\n")),(0,r.yg)("p",null,"\u6765\u770b\u770bcss-loader\u5bf9a.css\u7684\u7f16\u8bd1\u8f93\u51fa\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'// css-loader\u8f93\u51fa\n\nexports = module.exports = require("../../../node_modules/css-loader/lib/css-base.js")(false);\n\n// imports\n// \u6587\u4ef6\u9700\u8981\u7684\u4f9d\u8d56js\u6a21\u5757\uff0c\u8fd9\u91cc\u4e3a\u7a7a\n\n// module\nexports.push([ // \u6a21\u5757\u5bfc\u51fa\u5185\u5bb9\n  module.id, \n  ".src-components-Home-index__c--3riXS {\\n  font-weight: bolder;\\n}\\n.src-components-Home-index__b--I-yI3 {\\n  color: red;\\n}\\n.src-components-Home-index__a--3EFPE {\\n  font-size: 16px;\\n}\\n", \n  ""\n]); \n\n// exports\nexports.locals = { // css-modules\u7684\u7c7b\u540d\u6620\u5c04\n  "c": "src-components-Home-index__c--3riXS",\n  "b": "src-components-Home-index__b--I-yI3",\n  "a": "src-components-Home-index__a--3EFPE"\n};\n')),(0,r.yg)("p",null,"\u53ef\u4ee5\u7406\u89e3\u4e3acss-loader\u5c06a.css\u3001b.css\u548cc.css\u7684\u6837\u5f0f\u5185\u5bb9\u4ee5\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u62fc\u63a5\u5728\u4e00\u8d77\uff0c\u5e76\u5c06\u5176\u4f5c\u4e3ajs\u6a21\u5757\u7684\u5bfc\u51fa\u5185\u5bb9\u3002"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"// css-loader\u6e90\u7801\uff08\u7ecf\u7b80\u5316\uff09\n// https://github.com/webpack-contrib/css-loader/blob/master/src/index.js\nimport postcss from 'postcss';\n\nmodule.exports = async function (content, map, meta) {\n  const options = this.getOptions(); // \u83b7\u53d6\u914d\u7f6e\n\n  const plugins = []; // \u8f6c\u8bd1\u6e90\u7801\u6240\u9700\u7684postcss\u63d2\u4ef6\n  shouldUseModulesPlugins(options, this) && plugins.push(modulesPlugins); // \u5904\u7406css-modules\n  shouldUseImportPlugin(options, this) && plugins.push(importPlugin); // \u5904\u7406@import\u8bed\u53e5\n  shouldUseURLPlugin(options, this) && plugins.push(urlPlugin); // \u5904\u7406url()\u8bed\u53e5\n  shouldUseIcssPlugin(options, this) && plugins.push(icssPlugin); // \u5904\u7406icss\u76f8\u5173\u903b\u8f91\n\n  if (meta && meta.ast) { // \u590d\u7528\u524d\u9762loader\u751f\u6210\u7684CSS AST\uff08\u5982postcss-loader\uff09\n    content = meta.ast.root;\n  }\n\n  const result = await postcss(plugins).process(content); // \u4f7f\u7528postcss\u8f6c\u8bd1\u6e90\u7801\n\n  const importCode = getImportCode(); // \u9700\u8981\u5bfc\u5165\u7684\u4f9d\u8d56\u8bed\u53e5\n  const moduleCode = getModuleCode(result); // \u6a21\u5757\u5bfc\u51fa\u5185\u5bb9\n  const exportCode = getExportCode(); // \u5176\u4ed6\u9700\u8981\u5bfc\u51fa\u7684\u4fe1\u606f\uff0c\u5982css-modules\u7684\u7c7b\u540d\u6620\u5c04\u7b49\n\n  const callback = this.async(); // \u5f02\u6b65\u8fd4\u56de\n  callback(null, `${importCode}${moduleCode}${exportCode}`);\n};\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"style-loader")),(0,r.yg)("p",null,"\u5c06\u751f\u6210\u7684",(0,r.yg)("inlineCode",{parentName:"p"},"css"),"\u6dfb\u52a0\u5230",(0,r.yg)("inlineCode",{parentName:"p"},"html"),"\u7684",(0,r.yg)("inlineCode",{parentName:"p"},"header"),"\u6807\u7b7e\u5185\u5f62\u6210\u5185\u8054\u6837\u5f0f"),(0,r.yg)("p",null,"\u7ecf\u8fc7css-loader\u7684\u8f6c\u8bd1\uff0c\u5df2\u7ecf\u5f97\u5230\u4e86\u5b8c\u6574\u7684css\u6837\u5f0f\u4ee3\u7801\uff0cstyle-loader\u7684\u4f5c\u7528\u5c31\u662f\u5c06\u7ed3\u679c\u4ee5style\u6807\u7b7e\u7684\u65b9\u5f0f\u63d2\u5165DOM\u6811\u4e2d\u3002"),(0,r.yg)("p",null,"\u76f4\u89c9\u4e0a\u4f3c\u4e4e\u53ea\u9700\u8981\u50cf\u4e0b\u9762\u8fd9\u6837\u8fd4\u56de\u4e00\u6bb5js\u4ee3\u7801\uff0c\u5c06css-loader\u8fd4\u56de\u7684\u7ed3\u679c\u63d2\u5165DOM\u5c31\u884c\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"module.exports = function (content) {\n  return `\n    const style = document.createElement('style');\n    style.innerHTML = '${content}';\n    document.head.appendChild(style);\n  `;\n};\n")),(0,r.yg)("p",null,"\u4f46css-loader\u8fd4\u56de\u7684\u4e0d\u662fcss\u6837\u5f0f\u4ee3\u7801\u7684\u6587\u672c\uff0c\u800c\u662f\u4e00\u4e2ajs\u6a21\u5757\u7684\u4ee3\u7801\uff0c\u5c06\u8fd9\u4e9bjs\u4ee3\u7801\u76f4\u63a5\u653e\u8fdbstyle\u6807\u91cc\u663e\u7136\u662f\u4e0d\u884c\u7684\u3002"),(0,r.yg)("p",null,"\u6211\u4eec\u6765\u770b\u770bstyle-loader\u7684\u5b9e\u73b0\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"// style-loader\nimport loaderUtils from 'loader-utils';\n\nmodule.exports = function (content) {\n  // do nothing\n};\n\nmodule.exports.pitch = function (remainingRequest) {\n  /*\n  * \u7528require\u8bed\u53e5\u83b7\u53d6css-loader\u8fd4\u56de\u7684js\u6a21\u5757\u7684\u5bfc\u51fa\n  * \u7528'!!'\u524d\u7f00\u8df3\u8fc7\u914d\u7f6e\u4e2d\u7684loader\uff0c\u907f\u514d\u91cd\u590d\u6267\u884c\n  * \u7528remainingRequest\u53c2\u6570\u83b7\u53d6loader\u94fe\u7684\u5269\u4f59\u90e8\u5206\uff0c\u5728\u672c\u4f8b\u4e2d\u662fcss-loader\u3001less-loader\n  * \u7528loaderUtils\u7684stringifyRequest\u65b9\u6cd5\u5c06request\u8bed\u53e5\u4e2d\u7684\u7edd\u5bf9\u8def\u5f84\u8f6c\u4e3a\u76f8\u5bf9\u8def\u5f84\n  */\n  const requestPath = loaderUtils.stringifyRequest(this, '!!' + remainingRequest);\n\n  // \u672c\u4f8b\u4e2drequestPath\u4e3a:\n  // '!!../node_modules/css-loader/index.js!../node_modules/less-loader/dist/cjs.js!src/styles/index.less'\n\n  return `\n    const content = require(${requestPath})\n    const style = document.createElement('style');\n    style.innerHTML = content;\n    document.head.appendChild(style);\n  `;\n};\n")),(0,r.yg)("p",null,"style-loader\u7684\u51e0\u4e2a\u8bbe\u8ba1\u601d\u8def\uff1a"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"css-loader\u8fd4\u56de\u7684\u6837\u5f0f\u53ea\u80fd\u901a\u8fc7\u5176js\u6a21\u5757\u7684\u8fd0\u884c\u65f6\u5f97\u5230\uff0c\u6545\u4f7f\u7528",(0,r.yg)("inlineCode",{parentName:"li"},"require"),"\u8bed\u53e5\u53d6\u5f97"),(0,r.yg)("li",{parentName:"ul"},"normal\u65b9\u6cd5\u5b9e\u9645\u4e0a\u4ec0\u4e48\u90fd\u6ca1\u505a\uff0c\u5728pitch\u65b9\u6cd5\u91cc",(0,r.yg)("inlineCode",{parentName:"li"},"\u4e2d\u65adloader\u94fe\u7684\u6267\u884c"),"\uff0c\u518d\u4ee5inline\u65b9\u5f0f\u8c03\u7528\u4e86\u540e\u65b9\u7684loader\u6765\u52a0\u8f7d\u5f53\u524d\u7684less\u6587\u4ef6"),(0,r.yg)("li",{parentName:"ul"},"\u5982\u679c\u5c06pitch\u4e2d\u7684\u5b9e\u73b0\u653e\u5230normal\u65b9\u6cd5\u91cc\uff0c\u5c31\u4f1a\u9020\u6210loader\u94fe\u6267\u884c\u4e24\u904d"),(0,r.yg)("li",{parentName:"ul"},"\u5982\u679crequestPath\u4e2d\u6ca1\u6709'!!'\u524d\u7f00\uff0c\u5c31\u4f1a\u9020\u6210loader\u94fe\u88ab\u65e0\u9650\u5faa\u73af\u8c03\u7528")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"MiniCssExtractPlugin.loader")),(0,r.yg)("p",null,"\u5c06 CSS ",(0,r.yg)("strong",{parentName:"p"},"\u63d0\u53d6\u5230\u5355\u72ec\u7684\u6587\u4ef6"),"\u4e2d\u3002\u5b83\u4e3a\u6bcf\u4e2a\u5305\u542b",(0,r.yg)("inlineCode",{parentName:"p"},"CSS")," \u7684 ",(0,r.yg)("inlineCode",{parentName:"p"},"JS")," \u6587\u4ef6\u521b\u5efa\u4e00\u4e2a ",(0,r.yg)("inlineCode",{parentName:"p"},"CSS")," \u6587\u4ef6\u3002\u5b83\u652f\u6301",(0,r.yg)("strong",{parentName:"p"},"\u6309\u9700\u52a0\u8f7d CSS \u548c ",(0,r.yg)("inlineCode",{parentName:"strong"},"SourceMaps"))),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"html-webpack-plugin")),(0,r.yg)("p",null,"\u751f\u6210 HTML \u6587\u4ef6\uff0c\u540c\u65f6\u53ef\u4ee5\u652f\u6301\u81ea\u5b9a\u4e49",(0,r.yg)("inlineCode",{parentName:"p"},"html"),"\u6a21\u677f"),(0,r.yg)("h3",{id:"webpack\u4f18\u5316\u505a\u8fc7\u4ec0\u4e48"},"webpack\u4f18\u5316\u505a\u8fc7\u4ec0\u4e48"),(0,r.yg)("h4",{id:"splitchunks"},"splitChunks"),(0,r.yg)("p",null,"\u9ed8\u8ba4\u914d\u7f6e\u4e3a"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"module.exports = {\n  //...\n  optimization: {\n    splitChunks: {\n      chunks: 'async',\n      minSize: 20000,\n      minRemainingSize: 0,\n      minChunks: 1,\n      maxAsyncRequests: 30,\n      maxInitialRequests: 30,\n      enforceSizeThreshold: 50000,\n      cacheGroups: {\n        defaultVendors: {\n          test: /[\\\\/]node_modules[\\\\/]/,\n          priority: -10,\n          reuseExistingChunk: true,\n        },\n        default: {\n          minChunks: 2,\n          priority: -20,\n          reuseExistingChunk: true,\n        },\n      },\n    },\n  },\n};\n")),(0,r.yg)("h3",{id:"tapable"},"tapable"),(0,r.yg)("h4",{id:"synchook"},"SyncHook"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const { SyncHook } = require('tapable');\n\n// \u521d\u59cb\u5316\u540c\u6b65\u94a9\u5b50\nconst hook = new SyncHook(['arg1', 'arg2', 'arg3']);\n\n// \u6ce8\u518c\u4e8b\u4ef6\nhook.tap('flag1', (arg1, arg2, arg3) => {\n  console.log('flag1:', arg1, arg2, arg3);\n});\n\nhook.tap('flag2', (arg1, arg2, arg3) => {\n  console.log('flag2:', arg1, arg2, arg3);\n});\n\n// \u8c03\u7528\u4e8b\u4ef6\u5e76\u4f20\u9012\u6267\u884c\u53c2\u6570\nhook.call('19Qingfeng', 'wang', 'haoyu');\n// \u6253\u5370\u7ed3\u679c\n// flag1: 19Qingfeng wang haoyu\n// flag2: 19Qingfeng wang haoyu\n")),(0,r.yg)("h4",{id:"syncbailhook"},"SyncBailHook"),(0,r.yg)("p",null,"SyncBailHook \u4e2d\u5982\u679c\u4efb\u4f55\u4e8b\u4ef6\u51fd\u6570",(0,r.yg)("strong",{parentName:"p"},"\u5b58\u5728\u8fd4\u56de\u503c"),"\uff0c\u90a3\u4e48\u4f1a\u7acb\u5373",(0,r.yg)("strong",{parentName:"p"},"\u4e2d\u65ad\u540e\u7eed"),"\u4e8b\u4ef6\u51fd\u6570\u7684\u8c03\u7528\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const { SyncBailHook } = require('tapable');\n\nconst hook = new SyncBailHook(['arg1', 'arg2', 'arg3']);\n\n// \u6ce8\u518c\u4e8b\u4ef6\nhook.tap('flag1', (arg1, arg2, arg3) => {\n  console.log('flag1:', arg1, arg2, arg3);\n  // \u5b58\u5728\u8fd4\u56de\u503c \u963b\u65adflag2\u4e8b\u4ef6\u7684\u8c03\u7528\n  return true\n});\n\nhook.tap('flag2', (arg1, arg2, arg3) => {\n  console.log('flag2:', arg1, arg2, arg3);\n});\n\n// \u8c03\u7528\u4e8b\u4ef6\u5e76\u4f20\u9012\u6267\u884c\u53c2\u6570\nhook.call('19Qingfeng', 'wang', 'haoyu');\n// \u6253\u5370\u7ed3\u679c\n// flag1: 19Qingfeng wang haoyu\n")),(0,r.yg)("h4",{id:"syncwaterfallhook"},"SyncWaterfallHook"),(0,r.yg)("p",null,"SyncWaterfallHook \u7011\u5e03\u94a9\u5b50\u4f1a",(0,r.yg)("strong",{parentName:"p"},"\u5c06\u4e0a\u4e00\u4e2a\u51fd\u6570\u7684\u8fd4\u56de\u503c\u4f20\u9012\u7ed9\u4e0b\u4e00\u4e2a\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570"),"\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const { SyncWaterfallHook } = require('tapable');\n\n// \u521d\u59cb\u5316\u540c\u6b65\u94a9\u5b50\nconst hook = new SyncWaterfallHook(['arg1', 'arg2', 'arg3']);\n\n// \u6ce8\u518c\u4e8b\u4ef6\nhook.tap('flag1', (arg1, arg2, arg3) => {\n  console.log('flag1:', arg1, arg2, arg3);\n  // \u5b58\u5728\u8fd4\u56de\u503c \u4fee\u6539flag2\u51fd\u6570\u7684\u5b9e\u53c2\n  return 'github';\n});\n\nhook.tap('flag2', (arg1, arg2, arg3) => {\n  console.log('flag2:', arg1, arg2, arg3);\n});\n\nhook.tap('flag3', (arg1, arg2, arg3) => {\n  console.log('flag3:', arg1, arg2, arg3);\n});\n\n// \u8c03\u7528\u4e8b\u4ef6\u5e76\u4f20\u9012\u6267\u884c\u53c2\u6570\nhook.call('19Qingfeng', 'wang', 'haoyu');\n// \u8f93\u51fa\u7ed3\u679c\n// flag1: 19Qingfeng wang haoyu\n// flag2: github wang haoyu\n// flag3: github wang haoyu\n")),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"\u9700\u8981\u989d\u5916\u6ce8\u610f\u7684\u662f\u5f53\u5b58\u5728\u591a\u4e2a\u53c2\u6570\u65f6\uff0c\u901a\u8fc7 SyncWaterfallHook \u4ec5\u80fd\u4fee\u6539\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684\u8fd4\u56de\u503c\u3002")),(0,r.yg)("h4",{id:"syncloophook"},"SyncLoopHook"),(0,r.yg)("p",null,"SyncLoopHook \u4f1a\u5728",(0,r.yg)("strong",{parentName:"p"},"\u4efb\u610f\u4e00\u4e2a\u88ab\u76d1\u542c\u7684\u51fd\u6570\u5b58\u5728\u975e undefined \u8fd4\u56de\u503c\u65f6\u8fd4\u56de\u91cd\u5934\u5f00\u59cb\u6267\u884c"),"\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const { SyncLoopHook } = require('tapable');\n\nlet flag1 = 2;\nlet flag2 = 1;\n\n// \u521d\u59cb\u5316\u540c\u6b65\u94a9\u5b50\nconst hook = new SyncLoopHook(['arg1', 'arg2', 'arg3']);\n\n// \u6ce8\u518c\u4e8b\u4ef6\nhook.tap('flag1', (arg1, arg2, arg3) => {\n  console.log('flag1');\n  if (flag1 !== 3) {\n    return flag1++;\n  }\n});\n\nhook.tap('flag2', (arg1, arg2, arg3) => {\n  console.log('flag2');\n  if (flag2 !== 3) {\n    return flag2++;\n  }\n});\n\n// \u8c03\u7528\u4e8b\u4ef6\u5e76\u4f20\u9012\u6267\u884c\u53c2\u6570\nhook.call('19Qingfeng', 'wang', 'haoyu');\n// \u6267\u884c\u7ed3\u679c\n// flag1\n// flag1\n// flag2\n// flag1\n// flag2\n// flag1\n// flag2\n")),(0,r.yg)("h4",{id:"asyncserieshook"},"AsyncSeriesHook"),(0,r.yg)("p",null,"AsyncSeriesHook \u8868\u793a\u5f02\u6b65\u4e32\u8054\u6267\u884c\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const { AsyncSeriesHook } = require('tapable');\n\n// \u521d\u59cb\u5316\u540c\u6b65\u94a9\u5b50\nconst hook = new AsyncSeriesHook(['arg1', 'arg2', 'arg3']);\n\nconsole.time('timer');\n\n// \u6ce8\u518c\u4e8b\u4ef6\nhook.tapAsync('flag1', (arg1, arg2, arg3, callback) => {\n  console.log('flag1:', arg1, arg2, arg3);\n  setTimeout(() => {\n    // 1s\u540e\u8c03\u7528callback\u8868\u793a flag1\u6267\u884c\u5b8c\u6210\n    callback();\n  }, 1000);\n});\n\nhook.tapPromise('flag2', (arg1, arg2, arg3) => {\n  console.log('flag2:', arg1, arg2, arg3);\n  // tapPromise\u8fd4\u56dePromise\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve();\n    }, 1000);\n  });\n});\n\n// \u8c03\u7528\u4e8b\u4ef6\u5e76\u4f20\u9012\u6267\u884c\u53c2\u6570\nhook.callAsync('19Qingfeng', 'wang', 'haoyu', () => {\n  console.log('\u5168\u90e8\u6267\u884c\u5b8c\u6bd5 done');\n  console.timeEnd('timer');\n});\n// \u6253\u5370\u7ed3\u679c\n// flag1: 19Qingfeng wang haoyu\n// flag2: 19Qingfeng wang haoyu\n// \u5168\u90e8\u6267\u884c\u5b8c\u6bd5 done\n// timer: 2.012s\n")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"tapAsync \u6ce8\u518c\u65f6\u5b9e\u53c2\u7ed3\u5c3e\u989d\u5916\u63a5\u53d7\u4e00\u4e2a callback \uff0c\u8c03\u7528 callback \u8868\u793a\u672c\u6b21\u4e8b\u4ef6\u6267\u884c\u5b8c\u6bd5\u3002"),(0,r.yg)("p",{parentName:"li"},"callback \u7b2c\u4e00\u4e2a\u53c2\u6570\u8868\u793a\u9519\u8bef\u5bf9\u8c61\uff0c\u5982\u679c\u4f20\u9012\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684\u8bdd\u90a3\u4e48\u5c31\u8868\u793a\u672c\u6b21\u6267\u884c\u51fa\u73b0\u9519\u8bef\u4f1a\u4e2d\u65ad\u6267\u884c\u3002\u4ece callback \u51fd\u6570\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8868\u793a\u5f00\u59cb\u8868\u793a\u672c\u6b21\u51fd\u6570\u8c03\u7528\u7684\u8fd4\u56de\u503c\u3002")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Promise \u5982\u679c reject\uff0c\u90a3\u4e48\u548c callback \u4f20\u9012\u9519\u8bef\u53c2\u6570\u540c\u6837\u6548\u679c\uff0c\u4e5f\u4f1a\u4e2d\u65ad\u540e\u7eed\u7684\u6267\u884c\u3002"))),(0,r.yg)("h4",{id:"asyncseriesbailhook"},"AsyncSeriesBailHook"),(0,r.yg)("p",null,"AsyncSeriesBailHook \u8868\u793a\u5f02\u6b65\u4e32\u884c\u4fdd\u9669\u94a9\u5b50\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const { AsyncSeriesBailHook } = require('tapable');\n\n// \u521d\u59cb\u5316\u540c\u6b65\u94a9\u5b50\nconst hook = new AsyncSeriesBailHook(['arg1', 'arg2', 'arg3']);\n\nconsole.time('timer');\n\n// \u6ce8\u518c\u4e8b\u4ef6\nhook.tapPromise('flag1', (arg1, arg2, arg3, callback) => {\n  console.log('flag2:', arg1, arg2, arg3);\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      // resolve\u51fd\u6570\u5b58\u5728\u4efb\u4f55\u503c\u8868\u793a\u5b58\u5728\u8fd4\u56de\u503c\n      // \u5b58\u5728\u8fd4\u56de\u503c bail\u4fdd\u9669\u6253\u5f00 \u4e2d\u65ad\u540e\u7eed\u6267\u884c\n      resolve(true);\n    }, 1000);\n  });\n});\n\n// flag2 \u4e0d\u4f1a\u88ab\u6267\u884c\u4e86\nhook.tapAsync('flag2', (arg1, arg2, arg3,callback) => {\n  console.log('flag1:', arg1, arg2, arg3);\n  setTimeout(() => {\n    callback();\n  }, 1000);\n});\n\n// \u8c03\u7528\u4e8b\u4ef6\u5e76\u4f20\u9012\u6267\u884c\u53c2\u6570\nhook.callAsync('19Qingfeng', 'wang', 'haoyu', () => {\n  console.log('\u5168\u90e8\u6267\u884c\u5b8c\u6bd5 done');\n  console.timeEnd('timer');\n});\n// \u6253\u5370\u7ed3\u679c\n// flag2: 19Qingfeng wang haoyu\n// \u5168\u90e8\u6267\u884c\u5b8c\u6bd5 done\n// timer: 1.012s\n")),(0,r.yg)("h4",{id:"asyncserieswaterfallhook"},"AsyncSeriesWaterfallHook"),(0,r.yg)("p",null,"AsyncSeriesWaterfallHook \u5f02\u6b65\u4e32\u884c\u7011\u5e03\u94a9\u5b50\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const { AsyncSeriesWaterfallHook } = require('tapable');\n\n// \u521d\u59cb\u5316\u540c\u6b65\u94a9\u5b50\nconst hook = new AsyncSeriesWaterfallHook(['arg1', 'arg2', 'arg3']);\n\nconsole.time('timer');\n\n// \u6ce8\u518c\u4e8b\u4ef6\nhook.tapPromise('flag1', (arg1, arg2, arg3) => {\n  console.log('flag2:', arg1, arg2, arg3);\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      resolve(true);\n    }, 1000);\n  });\n});\n\nhook.tapAsync('flag2', (arg1, arg2, arg3, callback) => {\n  console.log('flag1:', arg1, arg2, arg3);\n  setTimeout(() => {\n    callback();\n  }, 1000);\n});\n\n// \u8c03\u7528\u4e8b\u4ef6\u5e76\u4f20\u9012\u6267\u884c\u53c2\u6570\nhook.callAsync('19Qingfeng', 'wang', 'haoyu', () => {\n  console.log('\u5168\u90e8\u6267\u884c\u5b8c\u6bd5 done');\n  console.timeEnd('timer');\n});\n// \u8f93\u51fa\u7ed3\u679c\n// flag2: 19Qingfeng wang haoyu\n// flag1: true wang haoyu\n// \u5168\u90e8\u6267\u884c\u5b8c\u6bd5 done\n// timer: 2.012s\n")),(0,r.yg)("h4",{id:"asyncparallelhook"},"AsyncParallelHook"),(0,r.yg)("p",null,"AsyncParallelHook \u5f02\u6b65\u5e76\u884c\u94a9\u5b50\uff0c\u4f1a\u5e76\u53d1\u6267\u884c\u6240\u6709\u5f02\u6b65\u94a9\u5b50\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const { AsyncParallelHook } = require('tapable');\n\n// \u521d\u59cb\u5316\u540c\u6b65\u94a9\u5b50\nconst hook = new AsyncParallelHook(['arg1', 'arg2', 'arg3']);\n\nconsole.time('timer');\n\n// \u6ce8\u518c\u4e8b\u4ef6\nhook.tapPromise('flag1', (arg1, arg2, arg3) => {\n  console.log('flag2:', arg1, arg2, arg3);\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      resolve(true);\n    }, 1000);\n  });\n});\n\nhook.tapAsync('flag2', (arg1, arg2, arg3, callback) => {\n  console.log('flag1:', arg1, arg2, arg3);\n  setTimeout(() => {\n    callback();\n  }, 1000);\n});\n\n// \u8c03\u7528\u4e8b\u4ef6\u5e76\u4f20\u9012\u6267\u884c\u53c2\u6570\nhook.callAsync('19Qingfeng', 'wang', 'haoyu', () => {\n  console.log('\u5168\u90e8\u6267\u884c\u5b8c\u6bd5 done');\n  console.timeEnd('timer');\n});\n// \u6267\u884c\u7ed3\u679c\n// flag2: 19Qingfeng wang haoyu\n// flag1: 19Qingfeng wang haoyu\n// \u5168\u90e8\u6267\u884c\u5b8c\u6bd5 done\n// timer: 1.010s\n")),(0,r.yg)("p",null,"\u53ef\u4ee5\u770b\u5230\u6700\u7ec8\u7684\u56de\u8c03\u51fd\u6570\u6267\u884c\u65f6\u6253\u5370\u7684\u4e8b\u4ef6\u4e3a",(0,r.yg)("inlineCode",{parentName:"p"},"1s"),"\u7a0d\u5fae\u591a\u4e00\u70b9\uff0c\u4e5f\u5c31\u662f\u8bf4 flag1 \u3001 flage2 \u4e24\u4e2a\u4e8b\u4ef6\u51fd\u6570\u5e76\u884c\u5f00\u59cb\u6267\u884c\uff0c\u57281s\u540e\u4e24\u4e2a\u5f02\u6b65\u51fd\u6570\u6267\u884c\u7ed3\u675f\uff0c\u6574\u4f53\u56de\u8c03\u7ed3\u675f\u3002"),(0,r.yg)("h4",{id:"asyncparallelbailhook"},"AsyncParallelBailHook"),(0,r.yg)("p",null,"AsyncParallelBailHook \u662f\u5f02\u6b65\u5e76\u884c\u4fdd\u9669\u94a9\u5b50\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const { AsyncParallelBailHook } = require('tapable');\n\n// \u521d\u59cb\u5316\u540c\u6b65\u94a9\u5b50\nconst hook = new AsyncParallelBailHook(['arg1', 'arg2', 'arg3']);\n\nconsole.time('timer');\n\n// \u6ce8\u518c\u4e8b\u4ef6\nhook.tapPromise('flag1', (arg1, arg2, arg3) => {\n  return new Promise((resolve, reject) => {\n    console.log('flag1 done:', arg1, arg2, arg3);\n    setTimeout(() => {\n      resolve(true);\n    }, 1000);\n  });\n});\n\nhook.tapAsync('flag2', (arg1, arg2, arg3, callback) => {\n  setTimeout(() => {\n    console.log('flag2 done:', arg1, arg2, arg3);\n    callback();\n  }, 3000);\n});\n\nhook.callAsync('19Qingfeng', 'wang', 'haoyu', () => {\n  console.log('\u5168\u90e8\u6267\u884c\u5b8c\u6bd5 done');\n  console.timeEnd('timer');\n});\n\n// \u6267\u884c\u7ed3\u679c\n// flag1 done: 19Qingfeng wang haoyu\n// \u5168\u90e8\u6267\u884c\u5b8c\u6bd5 done\n// timer: 1.013s\n// flag2 done: 19Qingfeng wang haoyu\n")),(0,r.yg)("h3",{id:"source-map"},"source-map"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"dist                                     \n\u251c\u2500 js                                    \n\u2502  \u251c\u2500 cheap-module-source-map.js #............ \u6709\u5bf9\u5e94\u7684 .map \u6587\u4ef6        \n\u2502  \u251c\u2500 cheap-module-source-map.js.map     \n\u2502  \u251c\u2500 cheap-source-map.js #................... \u6709              \n\u2502  \u251c\u2500 cheap-source-map.js.map            \n\u2502  \u251c\u2500 eval-cheap-module-source-map.js #....... \u65e0  \n\u2502  \u251c\u2500 eval-cheap-source-map.js #.............. \u65e0          \n\u2502  \u251c\u2500 eval-source-map.js #.................... \u65e0               \n\u2502  \u251c\u2500 eval.js #............................... \u65e0                           \n\u2502  \u251c\u2500 hidden-source-map.js #.................. \u6709              \n\u2502  \u251c\u2500 hidden-source-map.js.map           \n\u2502  \u251c\u2500 inline-cheap-module-source-map.js #..... \u65e0  \n\u2502  \u251c\u2500 inline-cheap-source-map.js #............ \u65e0         \n\u2502  \u251c\u2500 inline-source-map.js #.................. \u65e0               \n\u2502  \u251c\u2500 nosources-source-map.js #............... \u6709           \n\u2502  \u251c\u2500 nosources-source-map.js.map        \n\u2502  \u251c\u2500 source-map.js #......................... \u6709                     \n\u2502  \u2514\u2500 source-map.js.map\n")),(0,r.yg)("p",null,"\u542b ",(0,r.yg)("inlineCode",{parentName:"p"},"eval")," \u548c ",(0,r.yg)("inlineCode",{parentName:"p"},"inline")," \u6a21\u5f0f\u7684\u90fd\u6ca1\u6709\u5bf9\u5e94\u7684",(0,r.yg)("inlineCode",{parentName:"p"},".map")," \u6587\u4ef6"),(0,r.yg)("h4",{id:"\u63a8\u8350\u914d\u7f6e"},"\u63a8\u8350\u914d\u7f6e"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"\u672c\u5730\u5f00\u53d1\uff1a")),(0,r.yg)("p",null,"\u63a8\u8350\uff1a",(0,r.yg)("inlineCode",{parentName:"p"},"eval-cheap-module-source-map")),(0,r.yg)("p",null,"\u7406\u7531\uff1a"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"\u672c\u5730\u5f00\u53d1\u9996\u6b21\u6253\u5305\u6162\u70b9\u6ca1\u5173\u7cfb\uff0c\u56e0\u4e3a ",(0,r.yg)("inlineCode",{parentName:"li"},"eval")," \u7f13\u5b58\u7684\u539f\u56e0\uff0crebuild \u4f1a\u5f88\u5feb"),(0,r.yg)("li",{parentName:"ul"},"\u5f00\u53d1\u4e2d\uff0c\u6211\u4eec\u6bcf\u884c\u4ee3\u7801\u4e0d\u4f1a\u5199\u7684\u592a\u957f\uff0c\u53ea\u9700\u8981\u5b9a\u4f4d\u5230\u884c\u5c31\u884c\uff0c\u6240\u4ee5\u52a0\u4e0a ",(0,r.yg)("inlineCode",{parentName:"li"},"cheap")),(0,r.yg)("li",{parentName:"ul"},"\u6211\u4eec\u5e0c\u671b\u80fd\u591f\u627e\u5230\u6e90\u4ee3\u7801\u7684\u9519\u8bef\uff0c\u800c\u4e0d\u662f\u6253\u5305\u540e\u7684\uff0c\u6240\u4ee5\u9700\u8981\u52a0\u4e0a ",(0,r.yg)("inlineCode",{parentName:"li"},"module"))),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"\u751f\u4ea7\u73af\u5883\uff1a")),(0,r.yg)("p",null,"\u63a8\u8350\uff1a",(0,r.yg)("inlineCode",{parentName:"p"},"(none)")),(0,r.yg)("p",null,"\u7406\u7531\uff1a"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"\u5c31\u662f\u4e0d\u60f3\u522b\u4eba\u770b\u5230\u6211\u7684\u6e90\u4ee3\u7801")),(0,r.yg)("h3",{id:"hashchunkhashcontenthash"},"Hash\u3001chunkHash\u3001contentHash"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"hash")," \uff1a\u4efb\u4f55\u4e00\u4e2a\u6587\u4ef6\u6539\u52a8\uff0c\u6574\u4e2a\u9879\u76ee\u7684\u6784\u5efa hash \u503c\u90fd\u4f1a\u6539\u53d8\uff1b"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"chunkhash"),"\uff1a\u6587\u4ef6\u7684\u6539\u52a8\u53ea\u4f1a\u5f71\u54cd\u5176\u6240\u5728 chunk \u7684 hash \u503c\uff1b"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"contenthash"),"\uff1a\u6bcf\u4e2a\u6587\u4ef6\u90fd\u6709\u5355\u72ec\u7684 hash \u503c\uff0c\u6587\u4ef6\u7684\u6539\u52a8\u53ea\u4f1a\u5f71\u54cd\u81ea\u8eab\u7684 hash \u503c\uff1b")))}d.isMDXComponent=!0}}]);